{"ast":null,"code":"import _defineProperty from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\dd\\\\Desktop\\\\Project SSI\\\\Major Project\\\\client\\\\src\\\\components\\\\SignUp.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport uuid from 'uuid'; // import {Cookies} from 'react-cookie';\n\nimport eccrypto from 'eccrypto';\nimport CryptoJS from \"crypto-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar nacl = require(\"tweetnacl\");\n\nnacl.util = require(\"tweetnacl-util\");\n\nvar arrayBufferToHex = require(\"array-buffer-to-hex\");\n\nvar SignUp = /*#__PURE__*/function (_Component) {\n  _inherits(SignUp, _Component);\n\n  var _super = _createSuper(SignUp);\n\n  function SignUp() {\n    var _this;\n\n    _classCallCheck(this, SignUp);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      name: '',\n      email: '',\n      phone: '',\n      address: '',\n      privateKey: null,\n      publicKey: null,\n      loading: true,\n      sign_loading: true,\n      download: false,\n      error: false,\n      errorMsg: null,\n      success: false,\n      successMsg: null,\n      showDownloadSuccess: false,\n      signature: false,\n      signatureValue: null,\n      route: false\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var profile_uuid = uuid.v1().replace(/-/g, \"\").toUpperCase();\n\n      _this.setState({\n        did: profile_uuid\n      });\n\n      if (_this.state.name && _this.state.phone && _this.state.email && _this.state.address && _this.state.signature) {\n        if (_this.state.download) {\n          document.cookie = \"name = \".concat(_this.state.name);\n          document.cookie = \"phone = \".concat(_this.state.phone);\n          document.cookie = \"email = \".concat(_this.state.email);\n          document.cookie = \"address = \".concat(_this.state.address);\n          document.cookie = \"did = \".concat(profile_uuid);\n          document.cookie = \"privateKey = \".concat(_this.state.privateKey);\n          document.cookie = \"publicKey = \".concat(_this.state.publicKey);\n\n          _this.setState({\n            route: true\n          });\n        } else {\n          _this.setState({\n            error: true,\n            errorMsg: \"Please Download the Credentials Details First\"\n          });\n\n          setTimeout(function () {\n            _this.setState({\n              error: false\n            });\n          }, 5000);\n        }\n      } else if (_this.state.name && _this.state.phone && _this.state.email && _this.state.address) {\n        // generate a signature\n        var signatureObject = {\n          name: _this.state.name,\n          phone: _this.state.phone,\n          email: _this.state.email,\n          address: _this.state.address,\n          did: profile_uuid\n        }; // encrypting the message\n        // Encrypt\n\n        var ciphertext = CryptoJS.AES.encrypt(JSON.stringify(signatureObject), _this.state.privateKey);\n\n        _this.setState({\n          signature: true,\n          signatureValue: ciphertext.toString()\n        });\n\n        _this.setState({\n          success: true,\n          successMsg: \"Signature generated, Please download the credential.\"\n        });\n\n        setTimeout(function () {\n          _this.setState({\n            success: false,\n            sign_loading: false\n          });\n        }, 3000);\n      } else if (!_this.state.signature) {\n        _this.setState({\n          error: true,\n          errorMsg: \"Please complete the form fields to generate a signature\"\n        });\n\n        setTimeout(function () {\n          _this.setState({\n            error: false\n          });\n        }, 5000);\n      } else if (!_this.state.download) {\n        _this.setState({\n          error: true,\n          errorMsg: \"Please Download the Credentials Details First\"\n        });\n\n        setTimeout(function () {\n          _this.setState({\n            error: false\n          });\n        }, 5000);\n      } else {\n        _this.setState({\n          error: true,\n          errorMsg: \"All Fields are Required!!\"\n        });\n\n        setTimeout(function () {\n          _this.setState({\n            error: false\n          });\n        }, 4000);\n      }\n    };\n\n    _this.componentDidMount = function () {\n      // Generating Cryptographic credentials\n      // A new random 32-byte private key.\n      var privateKey = eccrypto.generatePrivate(); // privateKey to Hex (private key is generated from eccrypto and can easily convereted to hex)\n\n      var privateHex = privateKey.toString('hex'); // converting back private key hex to uintarray\n      // console.log(Buffer.from(arrayBufferToHex(privateKey),\"hex\"));\n      // Corresponding uncompressed (65-byte) public key.\n      // we are generating public key from the nacl(Salt) and to convert it to hex we have used another library \n\n      var publicKey = nacl.box.keyPair.fromSecretKey(privateKey).publicKey; // generating public key hex\n\n      var publicHex = arrayBufferToHex(publicKey);\n      console.log(publicHex);\n\n      _this.setState({\n        publicKey: publicHex,\n        privateKey: privateHex\n      });\n    };\n\n    _this.handleLoading = function () {\n      setTimeout(function () {\n        _this.setState({\n          loading: false\n        });\n      }, 3000);\n    };\n\n    _this.handleDownload = function (e) {\n      e.preventDefault();\n      var file_name = 'cryptographic_details.txt';\n      var details = \"Private Key: \".concat(_this.state.privateKey, \"\\nPublic Key: \").concat(_this.state.publicKey, \"\\nSignature: \").concat(_this.state.signatureValue);\n      var element = document.createElement('a');\n      element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(details));\n      element.setAttribute('download', file_name);\n      element.style.display = 'none';\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n\n      _this.setState({\n        signature: true,\n        download: true,\n        showDownloadSuccess: true\n      });\n\n      setTimeout(function () {\n        _this.setState({\n          showDownloadSuccess: false\n        });\n      }, 5000);\n    };\n\n    return _this;\n  }\n\n  _createClass(SignUp, [{\n    key: \"render\",\n    value: function render() {\n      if (this.state.route === true) {\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 16\n        }, this);\n      }\n\n      if (this.state.name && this.state.phone) {\n        this.handleLoading();\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-around'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"create-account-tab\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: this.props.handleCreateCut,\n            className: \"open-close-button open\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            action: \"#\",\n            onSubmit: this.handleSubmit,\n            className: \"create-account-form\",\n            autoComplete: \"off\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"login-title\",\n              children: \"Register\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this), this.state.error && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alert alert-danger\",\n              style: {\n                textTransform: \"none\"\n              },\n              children: this.state.errorMsg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 19\n            }, this), this.state.success && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alert alert-success\",\n              style: {\n                textTransform: \"none\"\n              },\n              children: this.state.successMsg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"create-account-block create-username\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"create-account-username\",\n                children: [\"Full Name: \", this.state.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"name\",\n                className: \"signup_input form-control\",\n                onChange: this.handleChange,\n                placeholder: \"username\",\n                id: \"create-account-username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"small-create-wallet small-username\",\n              children: \"*required field\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"create-account-block create-password\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"create-account-password\",\n                children: \"phone no:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"phone\",\n                className: \"signup_input form-control\",\n                onChange: this.handleChange,\n                placeholder: \"phone no\",\n                id: \"create-account-password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"small-create-wallet small-phoneNo\",\n              children: \"*required field\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"create-account-block confirm-password-block\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"create-account-confirm-password\",\n                children: \"email:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                name: \"email\",\n                className: \"signup_input form-control\",\n                onChange: this.handleChange,\n                placeholder: \"email\",\n                id: \"create-account-confirm-password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"small-create-wallet small-email\",\n              children: \"*required field\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"create-account-block confirm-password-block\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"create-account-confirm-password\",\n                children: \"address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"address\",\n                className: \"signup_input form-control\",\n                onChange: this.handleChange,\n                placeholder: \"address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"small-create-wallet small-email\",\n              children: \"*required field\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"submit-btn\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"form-submit\",\n                children: \"sign up\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this), this.state.name && this.state.phone && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"create-crypto-tab\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.handleDownload,\n            className: \"create-account-form\",\n            autoComplete: \"off\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alert alert-info\",\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-center\",\n                children: \"Keep Cryptographic Details Secrectly\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 19\n            }, this), this.state.showDownloadSuccess && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alert alert-success\",\n              style: {\n                textTransform: \"none\"\n              },\n              children: \"Thanks for downloading...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 19\n            }, this), this.state.loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"lds-facebook\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"\",\n                children: \"Generating Cryptographic Details...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"create-account-block create-username\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"create-account-username\",\n                  children: \"Public Key:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"name\",\n                  className: \"signup_input form-control\",\n                  value: this.state.publicKey\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"small-create-wallet small-username\",\n                children: \"*required field\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"create-account-block create-password\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"create-account-password\",\n                  children: \"Private Key:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"phone\",\n                  className: \"signup_input form-control\",\n                  value: this.state.privateKey\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"small-create-wallet small-phoneNo\",\n                children: \"*required field\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 23\n              }, this), this.state.signature && (this.state.sign_loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"lds-facebook\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 35\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 338,\n                    columnNumber: 35\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 35\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"\",\n                  children: \"Generating signature...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 31\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"create-account-block create-password\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"create-account-password\",\n                  children: \"Signature:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"phone\",\n                  className: \"signup_input form-control\",\n                  value: this.state.signatureValue\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 27\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"create-account-submit text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"form-submit  \".concat(!this.state.signature && 'form-btn-disabled'),\n                  disabled: !this.state.signature,\n                  children: \"Save Credentials\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }, this);\n    }\n  }]);\n\n  return SignUp;\n}(Component);\n\nexport default SignUp;","map":{"version":3,"sources":["C:/Users/dd/Desktop/Project SSI/Major Project/client/src/components/SignUp.js"],"names":["React","Component","Redirect","uuid","eccrypto","CryptoJS","nacl","require","util","arrayBufferToHex","SignUp","state","name","email","phone","address","privateKey","publicKey","loading","sign_loading","download","error","errorMsg","success","successMsg","showDownloadSuccess","signature","signatureValue","route","handleChange","e","setState","target","value","handleSubmit","preventDefault","profile_uuid","v1","replace","toUpperCase","did","document","cookie","setTimeout","signatureObject","ciphertext","AES","encrypt","JSON","stringify","toString","componentDidMount","generatePrivate","privateHex","box","keyPair","fromSecretKey","publicHex","console","log","handleLoading","handleDownload","file_name","details","element","createElement","setAttribute","encodeURIComponent","style","display","body","appendChild","click","removeChild","justifyContent","props","handleCreateCut","textTransform"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {Redirect} from 'react-router-dom';\nimport uuid from 'uuid'\n// import {Cookies} from 'react-cookie';\nimport eccrypto from 'eccrypto';\nimport CryptoJS from \"crypto-js\";\n\nconst nacl = require(\"tweetnacl\");\nnacl.util = require(\"tweetnacl-util\");\nconst arrayBufferToHex = require(\"array-buffer-to-hex\");\n\n\nclass SignUp extends Component {\n    state = {\n        name:'',\n        email:'',\n        phone:'',\n        address:'',\n        privateKey:null,\n        publicKey:null,\n        loading:true,\n        sign_loading:true,\n        download:false,\n        error:false,\n        errorMsg:null,\n        success:false,\n        successMsg:null,\n        showDownloadSuccess:false,\n        signature:false,\n        signatureValue:null,\n        route:false,\n    }\n\n    handleChange = (e) => {\n        this.setState({[e.target.name]:e.target.value});\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n      const profile_uuid = uuid.v1().replace(/-/g, \"\").toUpperCase();\n      this.setState({did:profile_uuid});\n      if (\n        this.state.name &&\n        this.state.phone &&\n        this.state.email &&\n        this.state.address &&\n        this.state.signature\n      ) {\n        if(this.state.download){\n\n          document.cookie = `name = ${this.state.name}`;\n          document.cookie = `phone = ${this.state.phone}`;\n          document.cookie = `email = ${this.state.email}`;\n          document.cookie = `address = ${this.state.address}`;\n          document.cookie = `did = ${profile_uuid}`;\n          document.cookie = `privateKey = ${this.state.privateKey}`;\n          document.cookie = `publicKey = ${this.state.publicKey}`;\n  \n          this.setState({ route: true });\n        } else {\n          this.setState({\n            error: true,\n            errorMsg: \"Please Download the Credentials Details First\"\n          });\n          setTimeout(() => {\n            this.setState({ error: false });\n          }, 5000);\n        }\n      } else if (\n        this.state.name &&\n        this.state.phone &&\n        this.state.email &&\n        this.state.address\n      ) {\n        // generate a signature\n        const signatureObject = {\n          name: this.state.name,\n          phone: this.state.phone,\n          email: this.state.email,\n          address: this.state.address,\n          did: profile_uuid,\n        };\n        // encrypting the message\n        // Encrypt\n        var ciphertext = CryptoJS.AES.encrypt(\n          JSON.stringify(signatureObject),\n          this.state.privateKey\n        );\n        this.setState({signature:true, signatureValue: ciphertext.toString() })\n        this.setState({\n          success: true,\n          successMsg: \"Signature generated, Please download the credential.\"\n        });\n        setTimeout(() => {\n          this.setState({ success: false, sign_loading:false });\n        }, 3000);\n\n      } else if (!this.state.signature) {\n        this.setState({\n          error: true,\n          errorMsg: \"Please complete the form fields to generate a signature\"\n        });\n        setTimeout(() => {\n          this.setState({ error: false });\n        }, 5000);\n      } else if (!this.state.download) {\n        this.setState({\n          error: true,\n          errorMsg: \"Please Download the Credentials Details First\"\n        });\n        setTimeout(() => {\n          this.setState({ error: false });\n        }, 5000);\n      }  else {\n        this.setState({\n          error: true,\n          errorMsg: \"All Fields are Required!!\"\n        });\n        setTimeout(() => {\n          this.setState({ error: false });\n        }, 4000);\n      }\n\n    }\n    componentDidMount = () => {\n      // Generating Cryptographic credentials\n      // A new random 32-byte private key.\n      let privateKey = eccrypto.generatePrivate();\n      // privateKey to Hex (private key is generated from eccrypto and can easily convereted to hex)\n      let privateHex = privateKey.toString('hex')\n\n      // converting back private key hex to uintarray\n      // console.log(Buffer.from(arrayBufferToHex(privateKey),\"hex\"));\n\n      // Corresponding uncompressed (65-byte) public key.\n      // we are generating public key from the nacl(Salt) and to convert it to hex we have used another library \n      let publicKey = nacl.box.keyPair.fromSecretKey(privateKey).publicKey;\n      // generating public key hex\n      let publicHex = arrayBufferToHex(publicKey);\n      console.log(publicHex)\n\n      this.setState({publicKey:publicHex,privateKey:privateHex})\n      \n\n    };\n\n    handleLoading = () => {\n      setTimeout(() => {\n        this.setState({loading:false})\n      }, 3000);\n    }\n\n    handleDownload = (e) => {\n      e.preventDefault();\n      let file_name = 'cryptographic_details.txt';\n      let details = `Private Key: ${this.state.privateKey}\\nPublic Key: ${this.state.publicKey}\\nSignature: ${this.state.signatureValue}`;\n      var element = document.createElement('a');\n      element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(details));\n      element.setAttribute('download', file_name);\n      element.style.display = 'none';\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n      this.setState({signature:true, download: true, showDownloadSuccess:true})\n      setTimeout(() => {\n        this.setState({ showDownloadSuccess: false })\n      }, 5000)\n    }\n    \n    render() {\n      if (this.state.route === true) {\n        return <Redirect to='/dashboard' />\n      }\n      if(this.state.name && this.state.phone){\n        this.handleLoading();\n      }\n        return (\n          <div style={{display:'flex', justifyContent:'space-around'}}>\n            <div className=\"create-account-tab\">\n              <div onClick={this.props.handleCreateCut} className=\"open-close-button open\"></div>\n              <form\n                action=\"#\"\n                onSubmit={this.handleSubmit}\n                className=\"create-account-form\"\n                autoComplete=\"off\"\n              >\n                <h1 className=\"login-title\">Register</h1>\n                {this.state.error && (\n                  <div\n                    className=\"alert alert-danger\"\n                    style={{ textTransform: \"none\" }}\n                  >\n                    {this.state.errorMsg}\n                  </div>\n                )}\n                {this.state.success && (\n                  <div\n                    className=\"alert alert-success\"\n                    style={{ textTransform: \"none\" }}\n                  >\n                    {this.state.successMsg}\n                  </div>\n                )}\n                <div className=\"create-account-block create-username\">\n                  <label htmlFor=\"create-account-username\">\n                    Full Name: {this.state.name}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"name\"\n                    className=\"signup_input form-control\"\n                    onChange={this.handleChange}\n                    placeholder=\"username\"\n                    id=\"create-account-username\"\n                  />\n                </div>\n                <small className=\"small-create-wallet small-username\">\n                  *required field\n                </small>\n                <div className=\"create-account-block create-password\">\n                  <label htmlFor=\"create-account-password\">phone no:</label>\n                  <input\n                    type=\"text\"\n                    name=\"phone\"\n                    className=\"signup_input form-control\"\n                    onChange={this.handleChange}\n                    placeholder=\"phone no\"\n                    id=\"create-account-password\"\n                  />\n                </div>\n                <small className=\"small-create-wallet small-phoneNo\">\n                  *required field\n                </small>\n                <div className=\"create-account-block confirm-password-block\">\n                  <label htmlFor=\"create-account-confirm-password\">\n                    email:\n                  </label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    className=\"signup_input form-control\"\n                    onChange={this.handleChange}\n                    placeholder=\"email\"\n                    id=\"create-account-confirm-password\"\n                  />\n                </div>\n                <small className=\"small-create-wallet small-email\">\n                  *required field\n                </small>\n\n                <div className=\"create-account-block confirm-password-block\">\n                  <label htmlFor=\"create-account-confirm-password\">\n                    address\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"address\"\n                    className=\"signup_input form-control\"\n                    onChange={this.handleChange}\n                    placeholder=\"address\"\n                  />\n                </div>\n                <small className=\"small-create-wallet small-email\">\n                  *required field\n                </small>\n\n                <div className=\"submit-btn\">\n                  <button className=\"form-submit\">sign up</button>\n                </div>\n              </form>\n            </div>\n            {this.state.name && this.state.phone && (\n              <div className=\"create-crypto-tab\">\n                <form\n                  onSubmit={this.handleDownload}\n                  className=\"create-account-form\"\n                  autoComplete=\"off\"\n                >\n                  <div className=\"alert alert-info\">\n                    <h4 className=\"text-center\">\n                      Keep Cryptographic Details Secrectly\n                    </h4>\n                  </div>\n                  {this.state.showDownloadSuccess && (\n                    <div\n                      className=\"alert alert-success\"\n                      style={{ textTransform: \"none\" }}\n                    >\n                      Thanks for downloading...\n                    </div>\n                  )}\n                  <br />\n                  {this.state.loading ? (\n                    <div className=\"text-center\">\n                      <div className=\"lds-facebook\">\n                        <div></div>\n                        <div></div>\n                        <div></div>\n                      </div>\n                      <p className=\"\">Generating Cryptographic Details...</p>\n                    </div>\n                  ) : (\n                    <div>\n                      <div className=\"create-account-block create-username\">\n                        <label htmlFor=\"create-account-username\">\n                          Public Key:\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"name\"\n                          className=\"signup_input form-control\"\n                          value={this.state.publicKey}\n                        />\n                      </div>\n                      <small className=\"small-create-wallet small-username\">\n                        *required field\n                      </small>\n                      <div className=\"create-account-block create-password\">\n                        <label htmlFor=\"create-account-password\">\n                          Private Key:\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"phone\"\n                          className=\"signup_input form-control\"\n                          value={this.state.privateKey}\n                        />\n                      </div>\n                      <small className=\"small-create-wallet small-phoneNo\">\n                        *required field\n                      </small>\n\n                      {this.state.signature && (\n                            this.state.sign_loading ? (\n                              <div className=\"text-center\">\n                                <div className=\"lds-facebook\">\n                                  <div></div>\n                                  <div></div>\n                                  <div></div>\n                                </div>\n                                <p className=\"\">Generating signature...</p>\n                              </div>\n                            ) : \n                          <div className=\"create-account-block create-password\">\n                            <label htmlFor=\"create-account-password\">\n                              Signature:\n                            </label>\n                            <input\n                              type=\"text\"\n                              name=\"phone\"\n                              className=\"signup_input form-control\"\n                              value={this.state.signatureValue}\n                            />\n                          </div>\n                        )}\n                      <div className=\"create-account-submit text-center\">\n                        <button className={`form-submit  ${!this.state.signature && 'form-btn-disabled'}` } disabled={!this.state.signature}>\n                          Save Credentials\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                </form>\n              </div>\n            )}\n          </div>\n        );\n    }\n}\n\nexport default SignUp;\n\n"]},"metadata":{},"sourceType":"module"}