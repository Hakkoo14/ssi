{"ast":null,"code":"import _toConsumableArray from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\gkhakurel\\\\Downloads\\\\Poject-main\\\\Poject-main\\\\client\\\\src\\\\components\\\\Verifier.js\";\nimport React, { Component } from 'react';\nimport './verifier.css';\nimport TimeAgo from 'react-timeago';\nimport VerifierSSI from \"../contracts/VerifierSSI.json\";\nimport getWeb3 from \"../utils/getWeb3\";\nimport IPFS from 'ipfs';\nimport eccrypto from 'eccrypto';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar nacl = require(\"tweetnacl\");\n\nnacl.util = require(\"tweetnacl-util\");\n\nvar arrayBufferToHex = require(\"array-buffer-to-hex\");\n\nvar EvaluateIpfs = /*#__PURE__*/function (_Component) {\n  _inherits(EvaluateIpfs, _Component);\n\n  var _super = _createSuper(EvaluateIpfs);\n\n  function EvaluateIpfs() {\n    _classCallCheck(this, EvaluateIpfs);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(EvaluateIpfs, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      if (this.props.addressObj) {\n        var _loop = function _loop(index) {\n          // decrypting the messageHex\n          var messageHex = JSON.parse(_this.props.addressObj[index].address);\n          console.log('messageHex');\n          console.log(messageHex);\n          var boxDecode = Buffer.from(messageHex.boxHex, \"hex\");\n          var nonceDecode = Buffer.from(messageHex.nonceHex, \"hex\"); // decoding the cryptography\n\n          var verifier_privateKey = Buffer.from(_this.props.privateKey, \"hex\");\n          var user_publicKey = Buffer.from(messageHex.user_publicKey, \"hex\");\n          var payload = nacl.box.open(boxDecode, nonceDecode, user_publicKey, verifier_privateKey); // decrypted object\n\n          var ipfsAddress = nacl.util.encodeUTF8(payload);\n          var node = new IPFS();\n          node.once('ready', function () {\n            node.cat(ipfsAddress, function (err, data) {\n              if (err) return console.error(err);\n              console.log(JSON.parse(data)); // convert Buffer back to string\n\n              var storage = {}; // console.log(JSON.parse(data));\n\n              storage = JSON.parse(localStorage.getItem(\"ipfsDetails\"));\n\n              if (!storage) {\n                storage = {};\n              }\n\n              storage[_this.props.addressObj[index].index] = JSON.parse(data); // console.log(storage)\n\n              localStorage.setItem(\"ipfsDetails\", JSON.stringify(storage)); // console.log(JSON.parse(localStorage.getItem('ipfsDetails')))\n            });\n          });\n        };\n\n        for (var index = 0; index < this.props.addressObj.length; index++) {\n          _loop(index);\n        }\n      }\n\n      var ipfsDetail = JSON.parse(localStorage.getItem('ipfsDetails'));\n      console.log(ipfsDetail);\n      if (!ipfsDetail) ipfsDetail = [];\n      return Object.entries(ipfsDetail).map(function (pair, i) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal fade\",\n          id: \"exampleModal\" + pair[0],\n          tabIndex: -1,\n          role: \"dialog\",\n          \"aria-labelledby\": \"exampleModalLabel\",\n          \"aria-hidden\": \"true\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-dialog\",\n            role: \"document\",\n            style: {\n              maxWidth: '800px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"modal-title\",\n                  id: \"exampleModalLabel\",\n                  children: pair[1].title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 68,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"close\",\n                  \"data-dismiss\": \"modal\",\n                  \"aria-label\": \"Close\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    \"aria-hidden\": \"true\",\n                    children: \"\\xD7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 37\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 33\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 29\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Name: \", pair[1].name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 74,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Phone: \", pair[1].phone]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Email: \", pair[1].email]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"User DID: \", pair[1].user_did]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Document DID: \", pair[1].doc_did]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 78,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Signature: \", pair[1].signature]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Status: \", pair[1].review ? 'Reviewed' : 'Not Reviewed']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 33\n                }, _this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"img-responsive\",\n                  height: \"600px\",\n                  width: \"400px\",\n                  src: pair[1].image,\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 33\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 29\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 25\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 21\n          }, _this)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }, _this);\n      });\n    }\n  }]);\n\n  return EvaluateIpfs;\n}(Component);\n\nvar RenderAcceptedRequests = /*#__PURE__*/function (_Component2) {\n  _inherits(RenderAcceptedRequests, _Component2);\n\n  var _super2 = _createSuper(RenderAcceptedRequests);\n\n  function RenderAcceptedRequests() {\n    _classCallCheck(this, RenderAcceptedRequests);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(RenderAcceptedRequests, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return this.props.requests.map(function (req, i) {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            className: req.removed ? 'verifier-strike-removed' : '',\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: req.u_did\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 83\n            }, _this2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 21\n          }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: req.removed ? 'verifier-strike-removed' : '',\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: req.docs\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 83\n            }, _this2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 21\n          }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: req.removed ? 'verifier-strike-removed' : '',\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: /*#__PURE__*/_jsxDEV(TimeAgo, {\n                date: req.req_at\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 87\n              }, _this2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 83\n            }, _this2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 21\n          }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: req.removed === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dash-remove-btn float-right\",\n              children: \"REMOVED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 54\n            }, _this2) : /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [!req.review && /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  style: {\n                    textTransform: 'uppercase',\n                    fontWeight: 'bold'\n                  },\n                  onClick: function onClick() {\n                    return _this2.props.handleReject(req.request_id);\n                  },\n                  className: \"btn btn-danger float-right ml-2\",\n                  children: \"reject\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 41\n                }, _this2), /*#__PURE__*/_jsxDEV(\"button\", {\n                  style: {\n                    textTransform: 'uppercase',\n                    fontWeight: 'bold'\n                  },\n                  onClick: function onClick() {\n                    return _this2.props.handleApprove(req.request_id);\n                  },\n                  className: \"btn btn-success float-right ml-2\",\n                  children: \"approve\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 41\n                }, _this2), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 53\n              }, _this2), req.review && /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [req.review && req.status ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-success float-right ml-2\",\n                  children: \"approved\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 71\n                }, _this2) : /*#__PURE__*/_jsxDEV(\"button\", {\n                  style: {\n                    textTransform: 'uppercase',\n                    fontWeight: 'bold'\n                  },\n                  className: \"btn btn-danger float-right ml-2\",\n                  children: \"rejected\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 47\n                }, _this2), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 52\n              }, _this2), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"verifer-req-btn float-right\",\n                style: {\n                  margin: 0,\n                  paddingRight: '30px',\n                  paddingLeft: '30px'\n                },\n                \"data-toggle\": \"modal\",\n                \"data-target\": \"#exampleModal\" + req.request_id,\n                children: \"preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 37\n              }, _this2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, _this2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 21\n          }, _this2)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }, _this2);\n      });\n    }\n  }]);\n\n  return RenderAcceptedRequests;\n}(Component);\n\nvar RenderPendingRequests = /*#__PURE__*/function (_Component3) {\n  _inherits(RenderPendingRequests, _Component3);\n\n  var _super3 = _createSuper(RenderPendingRequests);\n\n  function RenderPendingRequests() {\n    var _this3;\n\n    _classCallCheck(this, RenderPendingRequests);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this3 = _super3.call.apply(_super3, [this].concat(args));\n    _this3.state = {\n      ipfsObj: null\n    };\n    return _this3;\n  }\n\n  _createClass(RenderPendingRequests, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return this.props.requests.map(function (req, i) {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: req.removed ? 'verifier-strike-removed' : '',\n          style: {\n            fontWeight: 500\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: req.u_did\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 25\n            }, _this4)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 21\n          }, _this4), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: req.docs\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 25\n            }, _this4)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 21\n          }, _this4), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: /*#__PURE__*/_jsxDEV(TimeAgo, {\n                date: req.req_at\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 29\n              }, _this4)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 25\n            }, _this4)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 21\n          }, _this4)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }, _this4);\n      });\n    }\n  }]);\n\n  return RenderPendingRequests;\n}(Component);\n\nvar Verifier = /*#__PURE__*/function (_Component4) {\n  _inherits(Verifier, _Component4);\n\n  var _super4 = _createSuper(Verifier);\n\n  function Verifier() {\n    var _this5;\n\n    _classCallCheck(this, Verifier);\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    _this5 = _super4.call.apply(_super4, [this].concat(args));\n    _this5.state = {\n      web3: null,\n      accounts: null,\n      VerifierSSI_contract: null,\n      refresh: false,\n      company: 'Pay Nepal',\n      did: '6G237080B7F911E9BCCD03A2106A727R',\n      user_did: null,\n      listOfDoc: null,\n      acceptedRequest: [],\n      pendingRequest: [],\n      acceptedIpfsAddress: [],\n      privateKey: null,\n      publicKey: null\n    };\n\n    _this5.handleKeyChange = function (e) {\n      _this5.setState({\n        user_did: e.target.value\n      });\n    };\n\n    _this5.handleDocChange = function (e) {\n      _this5.setState({\n        listOfDoc: e.target.value\n      });\n    };\n\n    _this5.handleRequest = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _this5$state, accounts, VerifierSSI_contract, comp_and_doc;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this5$state = _this5.state, accounts = _this5$state.accounts, VerifierSSI_contract = _this5$state.VerifierSSI_contract;\n              comp_and_doc = _this5.state.listOfDoc + ';' + _this5.state.company;\n              _context.next = 4;\n              return VerifierSSI_contract.methods.makeRequest(_this5.state.user_did, _this5.state.publicKey, comp_and_doc, Date()).send({\n                from: accounts[0]\n              });\n\n            case 4:\n              // await contract.methods.evaluateRequest(this.state.user_did).send({ from: accounts[0] });\n              // let show = await contract.methods.showRequest().call();\n              window.location.reload(false);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this5.handleApprove = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(request_id) {\n        var _this5$state2, accounts, VerifierSSI_contract;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this5$state2 = _this5.state, accounts = _this5$state2.accounts, VerifierSSI_contract = _this5$state2.VerifierSSI_contract;\n                _context2.next = 3;\n                return VerifierSSI_contract.methods.verifyDocument(request_id, true, true).send({\n                  from: accounts[0]\n                });\n\n              case 3:\n                window.location.reload(false);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this5.handleReject = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(request_id) {\n        var _this5$state3, accounts, VerifierSSI_contract;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this5$state3 = _this5.state, accounts = _this5$state3.accounts, VerifierSSI_contract = _this5$state3.VerifierSSI_contract;\n                _context3.next = 3;\n                return VerifierSSI_contract.methods.verifyDocument(request_id, true, false).send({\n                  from: accounts[0]\n                });\n\n              case 3:\n                window.location.reload(false);\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this5.componentDidMount = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var cookie, cookieArr, value, privateKey, privateHex, publicKey, publicHex, web3, accounts, networkId, deployedNetwork, instance, VerifierSSI_contract, reqCount, request_details, acceptedIpfsAddress, i, comp_and_doc, obj;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              cookie = document.cookie;\n              cookieArr = cookie.split('; ');\n              value = [];\n              cookieArr.forEach(function (arr) {\n                var content = arr.split('=');\n                value[content[0]] = content[1];\n              });\n\n              if (!value['V_privateKey']) {\n                // Generating Cryptographic credentials\n                // A new random 32-byte private key.\n                privateKey = eccrypto.generatePrivate(); // privateKey to Hex\n\n                privateHex = privateKey.toString('hex'); // Corresponding uncompressed (65-byte) public key.\n                // we are generating public key from the nacl(Salt) and to convert it to hex we have used another library \n\n                publicKey = nacl.box.keyPair.fromSecretKey(privateKey).publicKey; // generating public key hex\n\n                publicHex = arrayBufferToHex(publicKey);\n\n                _this5.setState({\n                  publicKey: publicHex,\n                  privateKey: privateHex\n                }); // saving details\n\n\n                document.cookie = \"V_privateKey = \".concat(privateHex);\n                document.cookie = \"V_publicKey = \".concat(publicHex);\n              } else {\n                _this5.setState({\n                  publicKey: value['V_publicKey'],\n                  privateKey: value['V_privateKey']\n                });\n              } // Get network provider and web3 instance.\n\n\n              _context4.next = 8;\n              return getWeb3();\n\n            case 8:\n              web3 = _context4.sent;\n              _context4.next = 11;\n              return web3.eth.getAccounts();\n\n            case 11:\n              accounts = _context4.sent;\n              _context4.next = 14;\n              return web3.eth.net.getId();\n\n            case 14:\n              networkId = _context4.sent;\n              deployedNetwork = VerifierSSI.networks[networkId];\n              instance = new web3.eth.Contract(VerifierSSI.abi, deployedNetwork && deployedNetwork.address); // Set web3, accounts, and contract to the state, and then proceed with an\n              // example of interacting with the contract's methods.\n\n              _this5.setState({\n                web3: web3,\n                accounts: accounts,\n                VerifierSSI_contract: instance\n              }); // latest Requests\n\n\n              VerifierSSI_contract = _this5.state.VerifierSSI_contract;\n              _context4.next = 21;\n              return VerifierSSI_contract.methods.showAllRequest().call();\n\n            case 21:\n              reqCount = _context4.sent;\n              request_details = [];\n              acceptedIpfsAddress = [];\n\n              if (!reqCount.length) {\n                _context4.next = 40;\n                break;\n              }\n\n              i = 1;\n\n            case 26:\n              if (!(i <= reqCount)) {\n                _context4.next = 39;\n                break;\n              }\n\n              _context4.next = 29;\n              return VerifierSSI_contract.methods.getIndividualRequestForVerifier(i).call();\n\n            case 29:\n              request_details[0] = _context4.sent;\n              // check verifier did with comping request did so that same requester match\n              console.log(request_details[0]); // separate company and documents\n\n              comp_and_doc = request_details[0].comp_and_doc;\n              request_details[0].docs = comp_and_doc.split(';')[0];\n              request_details[0].company = comp_and_doc.split(';')[1];\n              request_details[0].request_id = i; // console.log(request_details[0])\n\n              if (request_details[0].encAddress) {\n                obj = [];\n                obj['address'] = request_details[0].encAddress;\n                obj['index'] = i;\n                acceptedIpfsAddress = [].concat(_toConsumableArray(acceptedIpfsAddress), [obj]);\n\n                _this5.setState({\n                  acceptedRequest: [].concat(_toConsumableArray(_this5.state.acceptedRequest), [request_details[0]])\n                });\n              } else _this5.setState({\n                pendingRequest: [].concat(_toConsumableArray(_this5.state.pendingRequest), [request_details[0]])\n              });\n\n            case 36:\n              i++;\n              _context4.next = 26;\n              break;\n\n            case 39:\n              _this5.setState({\n                acceptedIpfsAddress: acceptedIpfsAddress\n              });\n\n            case 40:\n              _context4.next = 46;\n              break;\n\n            case 42:\n              _context4.prev = 42;\n              _context4.t0 = _context4[\"catch\"](0);\n              // Catch any errors for any of the above operations.\n              alert(\"Failed to load web3, accounts, or contract. Check console for details.\");\n              console.error(_context4.t0);\n\n            case 46:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 42]]);\n    }));\n    return _this5;\n  }\n\n  _createClass(Verifier, [{\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"verifier-entire\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dash-nav\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"dash-title\",\n                children: \"Self Sovereign Identity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: this.handleLogout,\n                className: \"verifer-logout-btn\",\n                children: \"Logout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"verifier-header\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"main-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"verifier\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"verifier_logo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"verifier-title\",\n                  children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                    style: {\n                      fontSize: '3rem'\n                    },\n                    children: \"Verifier\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 293,\n                    columnNumber: 65\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"make-request-div\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    width: '500px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      fontSize: '20px'\n                    },\n                    children: \"Request new document\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 297,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    onChange: this.handleKeyChange,\n                    className: \"publicKeyInput form-control\",\n                    style: {\n                      marginBottom: '5px'\n                    },\n                    type: \"text\",\n                    placeholder: \"Enter public key\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    onChange: this.handleDocChange,\n                    className: \"publicKeyInput form-control\",\n                    type: \"text\",\n                    placeholder: \"Enter Document Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 299,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: this.handleRequest,\n                  className: \"verifer-req-btn\",\n                  children: \"Make Request\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"verifier_content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"recent-lists\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  marginBottom: '4vh',\n                  fontWeight: 500\n                },\n                children: \"Accepted Requests\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  className: \"\",\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Account\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 312,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 312,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Document\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 313,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 313,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Arrived_at\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 314,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 314,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 311,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: [/*#__PURE__*/_jsxDEV(RenderAcceptedRequests, {\n                    requests: this.state.acceptedRequest,\n                    handleApprove: function handleApprove(request_id) {\n                      return _this6.handleApprove(request_id);\n                    },\n                    handleReject: function handleReject(request_id) {\n                      return _this6.handleReject(request_id);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 319,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(EvaluateIpfs, {\n                    addressObj: this.state.acceptedIpfsAddress,\n                    privateKey: this.state.privateKey\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 320,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history\",\n              style: {\n                marginTop: '15px',\n                fontWeight: 500\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  marginBottom: '4vh'\n                },\n                children: \"Pending Requests\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  className: \"verifer-table-header\",\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Account\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 329,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 329,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Document\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 330,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 330,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Arrived_at\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 331,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 331,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 332,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 328,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: /*#__PURE__*/_jsxDEV(RenderPendingRequests, {\n                    requests: this.state.pendingRequest,\n                    handleClickSend: this.handleClickSend\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 336,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 13\n      }, this);\n    }\n  }]);\n\n  return Verifier;\n}(Component);\n\nexport default Verifier;","map":{"version":3,"sources":["C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/src/components/Verifier.js"],"names":["React","Component","TimeAgo","VerifierSSI","getWeb3","IPFS","eccrypto","nacl","require","util","arrayBufferToHex","EvaluateIpfs","props","addressObj","index","messageHex","JSON","parse","address","console","log","boxDecode","Buffer","from","boxHex","nonceDecode","nonceHex","verifier_privateKey","privateKey","user_publicKey","payload","box","open","ipfsAddress","encodeUTF8","node","once","cat","err","data","error","storage","localStorage","getItem","setItem","stringify","length","ipfsDetail","Object","entries","map","pair","i","maxWidth","title","name","phone","email","user_did","doc_did","signature","review","image","RenderAcceptedRequests","requests","req","removed","u_did","docs","req_at","textTransform","fontWeight","handleReject","request_id","handleApprove","status","margin","paddingRight","paddingLeft","RenderPendingRequests","state","ipfsObj","Verifier","web3","accounts","VerifierSSI_contract","refresh","company","did","listOfDoc","acceptedRequest","pendingRequest","acceptedIpfsAddress","publicKey","handleKeyChange","e","setState","target","value","handleDocChange","handleRequest","comp_and_doc","methods","makeRequest","Date","send","window","location","reload","verifyDocument","componentDidMount","cookie","document","cookieArr","split","forEach","arr","content","generatePrivate","privateHex","toString","keyPair","fromSecretKey","publicHex","eth","getAccounts","net","getId","networkId","deployedNetwork","networks","instance","Contract","abi","showAllRequest","call","reqCount","request_details","getIndividualRequestForVerifier","encAddress","obj","alert","handleLogout","fontSize","width","marginBottom","marginTop","handleClickSend"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './verifier.css'\nimport TimeAgo from 'react-timeago'\nimport VerifierSSI from \"../contracts/VerifierSSI.json\";\nimport getWeb3 from \"../utils/getWeb3\";\nimport IPFS from 'ipfs'\nimport eccrypto from 'eccrypto';\nconst nacl = require(\"tweetnacl\");\nnacl.util = require(\"tweetnacl-util\");\nconst arrayBufferToHex = require(\"array-buffer-to-hex\");\n\nclass EvaluateIpfs extends Component {\n    render(){\n        if(this.props.addressObj)\n        \n        for (let index = 0; index < this.props.addressObj.length; index++) {\n            // decrypting the messageHex\n            let messageHex = JSON.parse(this.props.addressObj[index].address);\n            console.log('messageHex')\n            console.log(messageHex)\n            let boxDecode = Buffer.from(messageHex.boxHex, \"hex\");\n            let nonceDecode = Buffer.from(messageHex.nonceHex, \"hex\");\n            // decoding the cryptography\n            const verifier_privateKey = Buffer.from(this.props.privateKey, \"hex\");\n            const user_publicKey = Buffer.from(messageHex.user_publicKey, \"hex\");\n            const payload = nacl.box.open(\n              boxDecode,\n              nonceDecode,\n              user_publicKey,\n              verifier_privateKey\n            );\n            // decrypted object\n            let ipfsAddress = nacl.util.encodeUTF8(payload)\n\n\n            const node = new IPFS()\n            node.once('ready', () => {\n                node.cat(ipfsAddress, (err, data) => {\n                    if (err) return console.error(err);\n                    console.log(JSON.parse(data))\n                    // convert Buffer back to string\n                    let storage = {};\n                    // console.log(JSON.parse(data));\n                    storage = JSON.parse(localStorage.getItem(\"ipfsDetails\"));\n                    if(!storage){\n                        storage = {};\n                    }\n                    storage[this.props.addressObj[index].index] = JSON.parse(data);\n                    // console.log(storage)\n                    localStorage.setItem(\"ipfsDetails\", JSON.stringify(storage));\n\n\n                    // console.log(JSON.parse(localStorage.getItem('ipfsDetails')))\n                });\n            })\n            }\n            let ipfsDetail = JSON.parse(localStorage.getItem('ipfsDetails')); \n            console.log(ipfsDetail)\n        if(!ipfsDetail)\n            ipfsDetail = [];\n        return ( \n            Object.entries(ipfsDetail).map((pair,i) => (\n                \n                <div key={i} className=\"modal fade\" id={\"exampleModal\" + pair[0]} tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                    <div className=\"modal-dialog\" role=\"document\" style={{ maxWidth: '800px' }}>\n                        <div className=\"modal-content\">\n                            <div className=\"modal-header\">\n                                <h5 className=\"modal-title\" id=\"exampleModalLabel\">{pair[1].title}</h5>\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                    <span aria-hidden=\"true\">×</span>\n                                </button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <p>Name: {pair[1].name}</p>\n                                <p>Phone: {pair[1].phone}</p>\n                                <p>Email: {pair[1].email}</p>\n                                <p>User DID: {pair[1].user_did}</p>\n                                <p>Document DID: {pair[1].doc_did}</p>\n                                <p>Signature: {pair[1].signature}</p>\n                                <p>Status: {(pair[1].review) ? 'Reviewed' : 'Not Reviewed'}</p>\n\n                                <img className=\"img-responsive\" height=\"600px\" width=\"400px\" src={pair[1].image} alt=\"\" />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ))\n        )\n    }\n}\n\nclass RenderAcceptedRequests extends Component {\n    render() {\n        return (\n            this.props.requests.map((req, i) => (\n                \n                <tr key={i}>\n                    <td className={req.removed ? 'verifier-strike-removed' : ''} ><h6>{req.u_did}</h6></td>\n                    <td className={req.removed ? 'verifier-strike-removed' : ''} ><h6>{req.docs}</h6></td>\n                    <td className={req.removed ? 'verifier-strike-removed' : ''} ><h6><TimeAgo date={req.req_at} /></h6></td>\n                    <td>\n                    {\n                            (req.removed === true) ? <div className=\"dash-remove-btn float-right\">REMOVED</div> \n                            : \n                            <span>\n                                    {!req.review && <span>\n                                        <button style={{ textTransform: 'uppercase', fontWeight: 'bold' }} onClick={() => this.props.handleReject(req.request_id)} className=\"btn btn-danger float-right ml-2\">reject</button>\n                                        <button style={{ textTransform: 'uppercase', fontWeight: 'bold' }} onClick={() => this.props.handleApprove(req.request_id)} className=\"btn btn-success float-right ml-2\">approve</button> </span>\n                                    }\n                                    {req.review && <span>\n                                        {(req.review && req.status) ? <button className=\"btn btn-success float-right ml-2\">approved</button>\n                                            : <button style={{ textTransform: 'uppercase', fontWeight: 'bold' }} className=\"btn btn-danger float-right ml-2\">rejected</button>} </span>\n                                    }\n                                    <button className=\"verifer-req-btn float-right\" style={{ margin: 0, paddingRight: '30px', paddingLeft: '30px' }} data-toggle=\"modal\" data-target={\"#exampleModal\" + req.request_id}>preview</button>\n                            </span>\n                    }\n                        \n                    </td>\n\n                </tr>\n            ))\n    \n        )\n    }\n}\n \nclass RenderPendingRequests extends Component {\n    state = {\n        ipfsObj: null,\n    }\n    render() {\n\n        return (\n            this.props.requests.map((req, i) => (\n\n                <tr className={req.removed ? 'verifier-strike-removed' : ''} style={{ fontWeight: 500}} key={i}>\n                    <td><h6>{req.u_did}</h6></td>\n                    <td><h6>{req.docs}</h6></td>\n                    <td><h6><TimeAgo date={req.req_at} /></h6></td>\n                </tr>\n            ))\n\n        )\n    }\n}\n\nclass Verifier extends Component {\n    state = {\n        web3: null,\n        accounts: null,\n        VerifierSSI_contract: null,\n        refresh: false,\n        company:'Pay Nepal',\n        did:'6G237080B7F911E9BCCD03A2106A727R',\n        user_did:null,\n        listOfDoc:null,\n        acceptedRequest:[],\n        pendingRequest:[],\n        acceptedIpfsAddress:[],\n        privateKey:null,\n        publicKey:null,\n    }\n    \n    handleKeyChange = (e) => {\n        this.setState({user_did:e.target.value});\n    }\n    handleDocChange = (e) => {\n        this.setState({ listOfDoc:e.target.value});\n    }\n    handleRequest = async () => {\n        const { accounts, VerifierSSI_contract } = this.state;\n        let comp_and_doc = this.state.listOfDoc + ';' + this.state.company;\n        await VerifierSSI_contract.methods.makeRequest(this.state.user_did, this.state.publicKey, comp_and_doc,Date()).send({ from: accounts[0] });\n        // await contract.methods.evaluateRequest(this.state.user_did).send({ from: accounts[0] });\n        // let show = await contract.methods.showRequest().call();\n        window.location.reload(false);\n    }\n\n    handleApprove = async (request_id) => {\n        const { accounts, VerifierSSI_contract } = this.state;\n        await VerifierSSI_contract.methods.verifyDocument(request_id, true, true).send({ from: accounts[0] });\n        window.location.reload(false);\n    }\n\n    handleReject = async (request_id) => {\n        const { accounts, VerifierSSI_contract } = this.state;\n        await VerifierSSI_contract.methods.verifyDocument(request_id, true, false).send({ from: accounts[0] });\n        window.location.reload(false);\n    }\n    componentDidMount = async () => {\n        try {\n            let cookie = document.cookie;\n            let cookieArr = cookie.split('; ');\n            let value = [];\n            cookieArr.forEach(arr => {\n                let content = arr.split('=');\n                value[content[0]] = content[1];\n\n            });\n            if (!value['V_privateKey']) {\n                // Generating Cryptographic credentials\n                // A new random 32-byte private key.\n                let privateKey = eccrypto.generatePrivate();\n                // privateKey to Hex\n                let privateHex = privateKey.toString('hex')\n\n                // Corresponding uncompressed (65-byte) public key.\n                // we are generating public key from the nacl(Salt) and to convert it to hex we have used another library \n                let publicKey = nacl.box.keyPair.fromSecretKey(privateKey).publicKey;\n                // generating public key hex\n                let publicHex = arrayBufferToHex(publicKey);\n                this.setState({ publicKey: publicHex, privateKey: privateHex })\n                // saving details\n                document.cookie = `V_privateKey = ${privateHex}`;\n                document.cookie = `V_publicKey = ${publicHex}`;\n            } else {\n                this.setState({ publicKey: value['V_publicKey'], privateKey: value['V_privateKey'] })\n            }\n\n            // Get network provider and web3 instance.\n            const web3 = await getWeb3();\n            // Use web3 to get the user's accounts.\n            const accounts = await web3.eth.getAccounts();\n\n            // Get the contract instance.\n            const networkId = await web3.eth.net.getId();\n            const deployedNetwork = VerifierSSI.networks[networkId];\n            const instance = new web3.eth.Contract(\n                VerifierSSI.abi,\n                deployedNetwork && deployedNetwork.address,\n            );\n            // Set web3, accounts, and contract to the state, and then proceed with an\n            // example of interacting with the contract's methods.\n            this.setState({ web3, accounts, VerifierSSI_contract: instance });\n\n            // latest Requests\n            const VerifierSSI_contract = this.state.VerifierSSI_contract;\n            let reqCount = await VerifierSSI_contract.methods.showAllRequest().call();\n            let request_details = [];\n            let acceptedIpfsAddress = [];\n            if (reqCount.length) {\n                for (let i = 1; i <= reqCount; i++){\n                    request_details[0] = (await VerifierSSI_contract.methods.getIndividualRequestForVerifier(i).call());\n                    // check verifier did with comping request did so that same requester match\n                    console.log(request_details[0])\n                    // separate company and documents\n                    let comp_and_doc = request_details[0].comp_and_doc;\n\n                    request_details[0].docs = comp_and_doc.split(';')[0];\n                    request_details[0].company = comp_and_doc.split(';')[1];\n                    request_details[0].request_id = i;\n                    // console.log(request_details[0])\n                    if(request_details[0].encAddress){\n                        let obj = [];\n                        obj['address'] = request_details[0].encAddress;\n                        obj['index'] = i;\n                        acceptedIpfsAddress = [...acceptedIpfsAddress,obj];\n                        \n                        this.setState({ acceptedRequest: [...this.state.acceptedRequest, request_details[0]] })\n                    }\n                    else \n                    this.setState({ pendingRequest: [...this.state.pendingRequest, request_details[0]] })\n                }\n                this.setState({acceptedIpfsAddress})\n                \n            }\n\n        } catch (error) {\n            // Catch any errors for any of the above operations.\n            alert(\n                `Failed to load web3, accounts, or contract. Check console for details.`,\n            );\n            console.error(error);\n        }\n    }\n    render() {\n\n        return (\n            <div>\n                <div className=\"verifier-entire\">\n                    <div className=\"dash-nav\">\n                        <div>\n                            <h1 className=\"dash-title\">Self Sovereign Identity</h1>\n                        </div>\n                        <div>\n                            <button onClick={this.handleLogout} className=\"verifer-logout-btn\">Logout</button>\n                        </div>\n                    </div>\n                    <div className=\"verifier-header\">\n                        <div className=\"main-header\">\n                            <div className=\"verifier\">\n                                <div className=\"verifier_logo\" />\n                                <div className=\"verifier-title\"><h1 style={{ fontSize: '3rem' }}>Verifier</h1></div>\n                            </div>\n                            <div className=\"make-request-div\">\n                                <div style={{ width: '500px' }}>\n                                    <label style={{ fontSize: '20px' }}>Request new document</label>\n                                    <input onChange={this.handleKeyChange} className=\"publicKeyInput form-control\" style={{ marginBottom: '5px' }} type=\"text\" placeholder=\"Enter public key\" />\n                                    <input onChange={this.handleDocChange} className=\"publicKeyInput form-control\" type=\"text\" placeholder=\"Enter Document Name\" />\n                                </div>\n                                <button onClick={this.handleRequest} className=\"verifer-req-btn\">Make Request</button>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"verifier_content\">\n                        <div className=\"recent-lists\">\n                            <h2 style={{ marginBottom: '4vh', fontWeight:500 }}>Accepted Requests</h2>\n                            <table className=\"table\">\n                                <thead className=\"\">\n                                    <tr>\n                                        <th><h5>Account</h5></th>\n                                        <th><h5>Document</h5></th>\n                                        <th><h5>Arrived_at</h5></th>\n                                        <th />\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <RenderAcceptedRequests requests={this.state.acceptedRequest} handleApprove={(request_id) => this.handleApprove(request_id)} handleReject={(request_id) => this.handleReject(request_id)}/>\n                                    <EvaluateIpfs addressObj={this.state.acceptedIpfsAddress} privateKey={this.state.privateKey}/>\n                                </tbody>\n                            </table>\n                        </div>\n                        <div className=\"history\" style={{ marginTop: '15px', fontWeight:500 }}>\n                            <h2 style={{ marginBottom: '4vh' }}>Pending Requests</h2>\n                            <table className=\"table\">\n                                <thead className=\"verifer-table-header\">\n                                    <tr>\n                                        <th><h5>Account</h5></th>\n                                        <th><h5>Document</h5></th>\n                                        <th><h5>Arrived_at</h5></th>\n                                        <th />\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <RenderPendingRequests requests={this.state.pendingRequest} handleClickSend={this.handleClickSend} />\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n \n            </div>\n        )\n    }\n}\n\nexport default Verifier;"]},"metadata":{},"sourceType":"module"}