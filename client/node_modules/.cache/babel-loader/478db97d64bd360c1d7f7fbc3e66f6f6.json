{"ast":null,"code":"import _toConsumableArray from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/dd/Desktop/Project SSI/Major Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\dd\\\\Desktop\\\\Project SSI\\\\Major Project\\\\client\\\\src\\\\components\\\\Dashboard.js\",\n    _this = this;\n\nimport React, { Component } from 'react';\nimport uuid from 'uuid'; // import { Redirect } from 'react-router-dom'\n\nimport TimeAgo from 'react-timeago';\nimport IPFS from 'ipfs'; // import {Cookies} from 'react-cookie';\n\nimport './dashboard.css';\nimport SSI from \"../contracts/SSI.json\";\nimport VerifierSSI from \"../contracts/VerifierSSI.json\";\nimport getWeb3 from \"../utils/getWeb3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar nacl = require(\"tweetnacl\");\n\nnacl.util = require(\"tweetnacl-util\");\n\nvar arrayBufferToHex = require(\"array-buffer-to-hex\");\n\nvar RenderRequests = function RenderRequests(props) {\n  return props.requests.map(function (req, i) {\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        className: req.removed ? 'verifier-strike-removed' : '',\n        children: /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: req.company\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 83\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 21\n      }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n        className: req.removed ? 'verifier-strike-removed' : '',\n        children: /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: req.docs\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 83\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 21\n      }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n        className: req.removed ? 'verifier-strike-removed' : '',\n        children: /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: /*#__PURE__*/_jsxDEV(TimeAgo, {\n            date: req.req_at\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 87\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 83\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 21\n      }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n        style: {\n          float: 'right'\n        },\n        children: [!req.review ? !req.review && req.status ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-info\",\n          children: \"Pending\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 37\n        }, _this) : !req.removed && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: function onClick() {\n            return props.handleClickSend(req, i);\n          },\n          className: \"btn btn-info\",\n          children: \"send document\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 54\n        }, _this) : req.review && req.status ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success\",\n          children: \"document accepted\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 33\n        }, _this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger \",\n          children: \"document rejected\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 35\n        }, _this), req.removed ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dash-remove-btn\",\n          children: \"REMOVED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 40\n        }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: function onClick() {\n            return props.handleRemove(req);\n          },\n          className: \"dash-remove-btn\",\n          children: \"REMOVE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 25\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 21\n      }, _this)]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 17\n    }, _this);\n  });\n};\n\n_c = RenderRequests;\n\nvar Dashboard = /*#__PURE__*/function (_Component) {\n  _inherits(Dashboard, _Component);\n\n  var _super = _createSuper(Dashboard);\n\n  function Dashboard() {\n    var _this2;\n\n    _classCallCheck(this, Dashboard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this2 = _super.call.apply(_super, [this].concat(args));\n    _this2.state = {\n      user: {},\n      demo: null,\n      imageState: null,\n      image: null,\n      did: null,\n      title: null,\n      web3: null,\n      accounts: null,\n      SSI_contract: null,\n      VerifierSSI_contract: null,\n      uploadDoc: true,\n      request_index: null,\n      requests: [],\n      sending_details: null,\n      sending_document: null,\n      send_status: false,\n      sendingDocId: null,\n      ipfsHash: null,\n      ipfsMessage: null,\n      refresh: false,\n      docs: [],\n      loading: true,\n      sending_btn: false\n    };\n\n    _this2.handleRemove = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(doc) {\n        var _this2$state, accounts, VerifierSSI_contract;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log('test');\n                console.log(doc);\n                _this2$state = _this2.state, accounts = _this2$state.accounts, VerifierSSI_contract = _this2$state.VerifierSSI_contract;\n                _context.next = 5;\n                return VerifierSSI_contract.methods.removeRequest(doc.request_id).send({\n                  from: accounts[0]\n                });\n\n              case 5:\n                // re render the requests\n                window.location.href = 'http://localhost:3000/dashboard';\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this2.handleForm = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n        var _this2$state2, accounts, SSI_contract, docArray, did, docId, node;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                e.preventDefault();\n                _this2$state2 = _this2.state, accounts = _this2$state2.accounts, SSI_contract = _this2$state2.SSI_contract;\n                console.log('clicked');\n                docArray = JSON.parse(localStorage.getItem('documents'));\n\n                if (docArray === null) {\n                  docArray = {};\n                } // every document has unique did\n\n\n                did = uuid.v1().replace(/-/g, \"\");\n                _context3.next = 8;\n                return SSI_contract.methods.getDocCount().call();\n\n              case 8:\n                docId = _context3.sent;\n                // store the document locally\n                docArray[_this2.state.title] = {\n                  doc_id: docId,\n                  user_did: _this2.state.user.did,\n                  did: did,\n                  title: _this2.state.title,\n                  image: _this2.state.image,\n                  name: _this2.state.user.name,\n                  address: _this2.state.user.address,\n                  email: _this2.state.user.email,\n                  phone: _this2.state.user.phone,\n                  review: false,\n                  status: 0,\n                  issuer_did: null,\n                  signature: null,\n                  created_at: new Date(),\n                  verified_at: null\n                }; // create an IPFS\n\n                node = new IPFS();\n                node.once(\"ready\", function () {\n                  // convert  data to a Buffer and add it to IPFS\n                  node.add(IPFS.Buffer.from(JSON.stringify(docArray[_this2.state.title])), /*#__PURE__*/function () {\n                    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(err, files) {\n                      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                        while (1) {\n                          switch (_context2.prev = _context2.next) {\n                            case 0:\n                              if (!err) {\n                                _context2.next = 2;\n                                break;\n                              }\n\n                              return _context2.abrupt(\"return\", console.error(err));\n\n                            case 2:\n                              // 'hash', known as CID, is a string uniquely addressing the data\n                              // and can be used to get it again. 'files' is an array because\n                              // 'add' supports multiple additions, but we only added one entry\n                              console.log(files[0].hash);\n\n                              _this2.setState({\n                                ipfsHash: files[0].hash\n                              }); // write document did to the blockchain\n\n\n                              _context2.next = 6;\n                              return SSI_contract.methods.addDocument(_this2.state.user.did, did, files[0].hash).send({\n                                from: accounts[0]\n                              });\n\n                            case 6:\n                            case \"end\":\n                              return _context2.stop();\n                          }\n                        }\n                      }, _callee2);\n                    }));\n\n                    return function (_x3, _x4) {\n                      return _ref3.apply(this, arguments);\n                    };\n                  }());\n                });\n                localStorage.setItem('documents', JSON.stringify(docArray));\n                console.log(docArray);\n                console.log('test');\n\n                _this2.setState({\n                  uploadDoc: true\n                });\n\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this2.handleTitle = function (e) {\n      _this2.setState({\n        title: e.target.value\n      });\n    };\n\n    _this2.handleFormPopUp = function () {\n      _this2.setState({\n        uploadDoc: false\n      });\n    };\n\n    _this2.handleFile = function (e) {\n      var reader = new FileReader();\n      console.log(e.target.files);\n\n      reader.onload = function () {\n        _this2.setState({\n          imageState: true,\n          image: reader.result\n        });\n      };\n\n      reader.readAsDataURL(e.target.files[0]);\n    };\n\n    _this2.handleClickSend = function (req, i) {\n      _this2.setState({\n        sending_details: req,\n        send_status: true\n      });\n    };\n\n    _this2.handleCloseSend = function () {\n      _this2.setState({\n        send_status: false\n      });\n    };\n\n    _this2.handleChangeSend = function (e) {\n      if (e.target.value == 0) {\n        _this2.setState({\n          sending_btn: false\n        });\n      } else {\n        _this2.setState({\n          sending_btn: true,\n          sending_document: e.target.value\n        });\n      }\n    };\n\n    _this2.handleLogout = function () {\n      document.cookie = \"did = ; expires= \".concat(new Date());\n      window.location.href = \"http://localhost:3000/\";\n    };\n\n    _this2.handleDocSend = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var _this2$state3, accounts, VerifierSSI_contract, storage, sending_document, sending_details, storage_details, node, ipfsObj;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              // handleDocSend will send the document to the vierifier\n              // current component is for calling this.setstate inside the callback function\n              //  we need to improve this section since we are duplicating the document on the ipfs\n              // for different verifier since the document is same but the ipfs address is different\n              // or we can leave as it is because if the same address is send then the address may be leak..\n              // enable sending doc btn\n              setTimeout(function () {\n                _this2.setState({\n                  sending_btn: true,\n                  send_status: false\n                });\n              }, 2000);\n              _this2$state3 = _this2.state, accounts = _this2$state3.accounts, VerifierSSI_contract = _this2$state3.VerifierSSI_contract;\n              storage = JSON.parse(localStorage.getItem('documents'));\n              sending_document = _this2.state.sending_document;\n              sending_details = _this2.state.sending_details;\n              storage_details = storage[sending_document]; // console.log(sending_details)\n              // console.log(storage_details)\n\n              node = new IPFS(); // let ipfsObj = storage[sending_document];\n\n              ipfsObj = {};\n              ipfsObj.req_id = sending_details.request_id;\n              ipfsObj.user_did = sending_details.u_did;\n              ipfsObj.doc_did = storage_details.did;\n              ipfsObj.title = storage_details.title;\n              ipfsObj.image = storage_details.image;\n              ipfsObj.name = storage_details.name;\n              ipfsObj.email = storage_details.email;\n              ipfsObj.phone = storage_details.phone;\n              ipfsObj.review = storage_details.review;\n              ipfsObj.status = storage_details.status;\n              ipfsObj.issuer_did = storage_details.issuer_did;\n              ipfsObj.signature = storage_details.signature;\n              ipfsObj.created_at = storage_details.created_at;\n              ipfsObj.verified_at = storage_details.verified_at; // once the node is ready\n\n              console.log(ipfsObj);\n              node.once('ready', function () {\n                // convert  data to a Buffer and add it to IPFS\n                node.add(IPFS.Buffer.from(JSON.stringify(ipfsObj)), /*#__PURE__*/function () {\n                  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(err, files) {\n                    var user_privateKey, verifier_publicKey, nonce, msg, box, message, boxHex, nonceHex, messageHex;\n                    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            if (!err) {\n                              _context4.next = 2;\n                              break;\n                            }\n\n                            return _context4.abrupt(\"return\", console.error(err));\n\n                          case 2:\n                            // 'hash', known as CID, is a string uniquely addressing the data\n                            // and can be used to get it again. 'files' is an array because\n                            // 'add' supports multiple additions, but we only added one entry\n                            console.log(files[0].hash);\n                            console.log(_this2.state.sending_details.V_publicKey);\n\n                            _this2.setState({\n                              ipfsHash: files[0].hash\n                            }); // encrypt the ipfs address using public key of verifier\n                            // Encrypting the message for Verifier.\n                            // verifier public key\n                            // user is sending the message to the verifier \n                            // reading Bob key pair from secret key\n\n\n                            user_privateKey = Buffer.from(_this2.state.user.privateKey, \"hex\"); // const user_publicKey = Buffer.from(this.state.user.publicKey, \"hex\");\n\n                            verifier_publicKey = Buffer.from(sending_details.V_publicKey, \"hex\"); // generating one time nonce for encryption\n\n                            nonce = nacl.randomBytes(24); // message for Alice\n\n                            msg = files[0].hash; // Bob encrypts message for Alice\n\n                            box = nacl.box(nacl.util.decodeUTF8(msg), nonce, verifier_publicKey, user_privateKey); // somehow send this message to Alice\n\n                            message = {\n                              box: box,\n                              nonce: nonce\n                            };\n                            console.log(message);\n                            boxHex = arrayBufferToHex(message.box);\n                            nonceHex = arrayBufferToHex(message.nonce);\n                            messageHex = {\n                              boxHex: boxHex,\n                              nonceHex: nonceHex,\n                              user_publicKey: _this2.state.user.publicKey\n                            };\n\n                            _this2.setState({\n                              ipfsMessage: messageHex\n                            });\n\n                            console.log(messageHex);\n                            _context4.next = 19;\n                            return VerifierSSI_contract.methods.acceptedByUser(_this2.state.sending_details.request_id, JSON.stringify(messageHex)).send({\n                              from: accounts[0]\n                            });\n\n                          case 19:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4);\n                  }));\n\n                  return function (_x5, _x6) {\n                    return _ref5.apply(this, arguments);\n                  };\n                }());\n              });\n\n            case 24:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    _this2.componentDidMount = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n      var cookie, cookieArr, value, ran, web3, accounts, networkId, deployedNetwork_SSI, instance_SSI, deployedNetwork_VerifierSSI, instance_VerifierSSI, VerifierSSI_contract, reqIndex, show, request_details, rem, docArray, SSI_contract, docsIndex, allDocs, docs, _rem, node;\n\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              cookie = document.cookie;\n              cookieArr = cookie.split('; ');\n              value = [];\n              cookieArr.forEach(function (arr) {\n                var content = arr.split('=');\n                value[content[0]] = content[1];\n              });\n\n              _this2.setState({\n                user: {\n                  name: value[\"name\"],\n                  email: value[\"email\"],\n                  phone: value[\"phone\"],\n                  address: value[\"address\"],\n                  did: value[\"did\"],\n                  privateKey: value[\"privateKey\"],\n                  publicKey: value[\"publicKey\"]\n                }\n              });\n\n              if (value['name']) {\n                ran = value['name'].split(' ');\n\n                _this2.setState({\n                  demo: ran[0]\n                });\n              }\n\n              _context8.prev = 6;\n              _context8.next = 9;\n              return getWeb3();\n\n            case 9:\n              web3 = _context8.sent;\n              _context8.next = 12;\n              return web3.eth.getAccounts();\n\n            case 12:\n              accounts = _context8.sent;\n              _context8.next = 15;\n              return web3.eth.net.getId();\n\n            case 15:\n              networkId = _context8.sent;\n              deployedNetwork_SSI = SSI.networks[networkId];\n              instance_SSI = new web3.eth.Contract(SSI.abi, deployedNetwork_SSI && deployedNetwork_SSI.address);\n              deployedNetwork_VerifierSSI = VerifierSSI.networks[networkId];\n              instance_VerifierSSI = new web3.eth.Contract(VerifierSSI.abi, deployedNetwork_VerifierSSI && deployedNetwork_VerifierSSI.address); // Set web3, accounts, and contract to the state, and then proceed with an\n              // example of interacting with the contract's methods.\n\n              _this2.setState({\n                web3: web3,\n                accounts: accounts,\n                SSI_contract: instance_SSI,\n                VerifierSSI_contract: instance_VerifierSSI\n              }); // latest Requests\n\n\n              VerifierSSI_contract = _this2.state.VerifierSSI_contract; // await VerifierSSI_contract.methods.evaluateRequest(this.state.user.did).send({ from: accounts[0] });\n\n              _context8.next = 24;\n              return VerifierSSI_contract.methods.showRequest(_this2.state.user.did).call();\n\n            case 24:\n              reqIndex = _context8.sent;\n              console.log(reqIndex); // if number is greater than 101020304050607080 (after this 09....) then it is \n              // converted to javascript and we could not handle this and gets error (by receiving the other document either not exist or of theres)\n\n              show = [];\n              request_details = [];\n\n              if (reqIndex > 1) {\n                // we have found documents\n                while (reqIndex >= 100) {\n                  rem = reqIndex % 100;\n                  show.push(rem);\n                  reqIndex = Math.floor(reqIndex / 100);\n                }\n              }\n\n              if (show) {\n                show.forEach( /*#__PURE__*/function () {\n                  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id) {\n                    var comp_and_doc;\n                    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                      while (1) {\n                        switch (_context6.prev = _context6.next) {\n                          case 0:\n                            _context6.next = 2;\n                            return VerifierSSI_contract.methods.getIndividualRequest(id).call();\n\n                          case 2:\n                            request_details[0] = _context6.sent;\n                            request_details[0].request_id = id;\n                            comp_and_doc = request_details[0].comp_and_doc;\n                            request_details[0].docs = comp_and_doc.split(';')[0];\n                            request_details[0].company = comp_and_doc.split(';')[1];\n\n                            _this2.setState({\n                              requests: [].concat(_toConsumableArray(_this2.state.requests), [request_details[0]])\n                            });\n\n                          case 8:\n                          case \"end\":\n                            return _context6.stop();\n                        }\n                      }\n                    }, _callee6);\n                  }));\n\n                  return function (_x7) {\n                    return _ref7.apply(this, arguments);\n                  };\n                }()); // console.log(request_details['request'])\n              } // reading all the users documents from blockchian\n\n\n              localStorage.removeItem('documents');\n              docArray = {};\n              SSI_contract = _this2.state.SSI_contract; // await SSI_contract.methods.evaluateRequest(this.state.user.did).send({ from: accounts[0] });\n\n              _context8.next = 35;\n              return SSI_contract.methods.showAllDocs(_this2.state.user.did).call();\n\n            case 35:\n              docsIndex = _context8.sent;\n              allDocs = [];\n              docs = [];\n\n              if (docsIndex > 1) {\n                // we have found documents\n                while (docsIndex >= 100) {\n                  _rem = docsIndex % 100;\n                  allDocs.push(_rem);\n                  docsIndex = Math.floor(docsIndex / 100);\n                }\n              }\n\n              if (allDocs) {\n                node = new IPFS();\n                node.once('ready', function () {\n                  allDocs.forEach( /*#__PURE__*/function () {\n                    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(id) {\n                      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n                        while (1) {\n                          switch (_context7.prev = _context7.next) {\n                            case 0:\n                              _context7.next = 2;\n                              return SSI_contract.methods.getDocument(id).call();\n\n                            case 2:\n                              docs[0] = _context7.sent;\n                              // read the ipfs\n                              node.cat(docs[0].ipfs, function (err, data) {\n                                if (err) return console.error(err); // convert Buffer back to string\n                                // let storage = {};\n                                // // console.log(JSON.parse(data));\n                                // storage = JSON.parse(localStorage.getItem(\"documents\"));\n                                // if (!storage) {\n                                //     storage = {};\n                                // }\n\n                                docArray[JSON.parse(data).title] = JSON.parse(data); // console.log(JSON.parse(localStorage.getItem('ipfsDetails')))\n                              });\n                              docs[0].doc_id = id;\n\n                              _this2.setState({\n                                docs: [].concat(_toConsumableArray(_this2.state.docs), [docs[0]])\n                              });\n\n                            case 6:\n                            case \"end\":\n                              return _context7.stop();\n                          }\n                        }\n                      }, _callee7);\n                    }));\n\n                    return function (_x8) {\n                      return _ref8.apply(this, arguments);\n                    };\n                  }());\n                });\n                setTimeout(function () {\n                  localStorage.setItem(\"documents\", JSON.stringify(docArray));\n\n                  _this2.setState({\n                    loading: false\n                  });\n                }, 1000);\n              }\n\n              _context8.next = 46;\n              break;\n\n            case 42:\n              _context8.prev = 42;\n              _context8.t0 = _context8[\"catch\"](6);\n              // Catch any errors for any of the above operations.\n              alert(\"Failed to load web3, accounts, or contract. Check console for details.\");\n              console.error(_context8.t0);\n\n            case 46:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8, null, [[6, 42]]);\n    }));\n\n    _this2.renderOptions = function () {\n      var storage = JSON.parse(localStorage.getItem('documents'));\n\n      if (storage && _this2.state.uploadDoc) {\n        return Object.entries(storage).map(function (pair, i) {\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: pair[0],\n            children: pair[0]\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 21\n          }, _assertThisInitialized(_this2));\n        });\n      }\n    };\n\n    _this2.renderDocuments = function () {\n      var storage = JSON.parse(localStorage.getItem('documents'));\n\n      if (storage && _this2.state.uploadDoc) {\n        return Object.entries(storage).map(function (pair, i) {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: pair[0]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 29\n              }, _assertThisInitialized(_this2))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 25\n            }, _assertThisInitialized(_this2)), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 25\n            }, _assertThisInitialized(_this2)), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: pair[1].status ? 'btn btn-success float-right' : 'btn btn-danger float-right',\n                children: [\" \", !pair[1].review ? 'UNVERIFIED' : pair[1].review && pair[1].status ? 'Verified' : 'Rejected']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 29\n              }, _assertThisInitialized(_this2)), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-secondary float-right mr-2\",\n                \"data-toggle\": \"modal\",\n                \"data-target\": \"#exampleModal\" + i,\n                children: \"PREVIEW\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 29\n              }, _assertThisInitialized(_this2)), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal fade\",\n                id: \"exampleModal\" + i,\n                tabIndex: -1,\n                role: \"dialog\",\n                \"aria-labelledby\": \"exampleModalLabel\",\n                \"aria-hidden\": \"true\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-dialog\",\n                  role: \"document\",\n                  style: {\n                    maxWidth: '700px'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"modal-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"modal-header\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                        className: \"modal-title\",\n                        id: \"exampleModalLabel\",\n                        children: pair[1].title\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 433,\n                        columnNumber: 41\n                      }, _assertThisInitialized(_this2)), /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        className: \"close\",\n                        \"data-dismiss\": \"modal\",\n                        \"aria-label\": \"Close\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          \"aria-hidden\": \"true\",\n                          children: \"\\xD7\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 435,\n                          columnNumber: 45\n                        }, _assertThisInitialized(_this2))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 434,\n                        columnNumber: 41\n                      }, _assertThisInitialized(_this2))]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 432,\n                      columnNumber: 37\n                    }, _assertThisInitialized(_this2)), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"modal-body\",\n                      children: /*#__PURE__*/_jsxDEV(\"img\", {\n                        className: \"img-responsive\",\n                        height: \"600px\",\n                        width: \"400px\",\n                        src: pair[1].image,\n                        alt: \"\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 439,\n                        columnNumber: 41\n                      }, _assertThisInitialized(_this2))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 438,\n                      columnNumber: 37\n                    }, _assertThisInitialized(_this2))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 33\n                  }, _assertThisInitialized(_this2))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 29\n                }, _assertThisInitialized(_this2))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 25\n              }, _assertThisInitialized(_this2))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 25\n            }, _assertThisInitialized(_this2))]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 21\n          }, _assertThisInitialized(_this2));\n        });\n      }\n    };\n\n    return _this2;\n  }\n\n  _createClass(Dashboard, [{\n    key: \"render\",\n    value: function render() {\n      var cookie = document.cookie;\n      var cookieArr = cookie.split('; ');\n      var value = [];\n      cookieArr.forEach(function (arr) {\n        var content = arr.split('=');\n        value[content[0]] = content[1];\n      });\n\n      if (!value['did']) {\n        window.location.href = \"http://localhost:3000/\";\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dash-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dash-nav\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"dash-title\",\n                children: \"Self Sovereign Identity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: this.handleLogout,\n                className: \"dash-logout-btn\",\n                children: \"Logout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dash-profile-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"profile-img\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"the-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 54\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table\",\n                children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  className: \"demo-user\",\n                  children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Name:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 479,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 479,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: this.state.user.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 480,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 480,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 478,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Address:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 483,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 483,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                        children: this.state.user.address\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 484,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 484,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 482,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Email:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 487,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 487,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                        style: {\n                          textTransform: 'lowercase'\n                        },\n                        children: this.state.user.email\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 488,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 488,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 486,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Phone:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 491,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 491,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                        children: this.state.user.phone\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 492,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 492,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 490,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"DID:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 495,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 495,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                        children: this.state.user.did\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 496,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 496,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 494,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 21\n          }, this), !this.state.send_status && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dash-content-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"content-table\",\n              children: [/*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                        children: \"Documents\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 508,\n                        columnNumber: 41\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 508,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 509,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"dash-add-doc-btn float-right\",\n                        \"data-toggle\": \"modal\",\n                        \"data-target\": \"#exampleModal\",\n                        onClick: this.handleFormPopUp,\n                        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"fa fa-plus\",\n                          style: {\n                            marginRight: '5px'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 510,\n                          columnNumber: 173\n                        }, this), \"Add New\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 510,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 510,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 507,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 506,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: !this.state.loading && this.renderDocuments()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 513,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal fade\",\n                id: \"exampleModal\",\n                tabIndex: -1,\n                role: \"dialog\",\n                \"aria-labelledby\": \"exampleModalLabel\",\n                \"aria-hidden\": \"true\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-dialog\",\n                  role: \"document\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"modal-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"modal-header\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                        className: \"modal-title\",\n                        id: \"exampleModalLabel\",\n                        children: \"Add New Document\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 523,\n                        columnNumber: 41\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        className: \"close\",\n                        \"data-dismiss\": \"modal\",\n                        \"aria-label\": \"Close\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          \"aria-hidden\": \"true\",\n                          children: \"\\xD7\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 525,\n                          columnNumber: 45\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 524,\n                        columnNumber: 41\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 522,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"modal-body\",\n                      children: /*#__PURE__*/_jsxDEV(\"form\", {\n                        onSubmit: this.handleForm,\n                        encType: \"multipart/form-data\",\n                        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                          htmlFor: \"title\",\n                          children: \"Document Title\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 530,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          name: \"title\",\n                          onChange: this.handleTitle,\n                          className: \"form-control\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 531,\n                          columnNumber: 41\n                        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                          htmlFor: \"document\",\n                          children: \"Select Document File\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 532,\n                          columnNumber: 45\n                        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"file\",\n                          name: \"file\",\n                          onChange: this.handleFile,\n                          className: \"form-control\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 533,\n                          columnNumber: 45\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"modal-footer\",\n                          children: /*#__PURE__*/_jsxDEV(\"button\", {\n                            type: \"submit\",\n                            onClick: this.handleForm,\n                            className: \"btn btn-primary\",\n                            \"data-dismiss\": \"modal\",\n                            children: \"Add Document\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 535,\n                            columnNumber: 49\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 534,\n                          columnNumber: 41\n                        }, this), this.state.image && /*#__PURE__*/_jsxDEV(\"img\", {\n                          src: this.state.image,\n                          alt: \"\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 537,\n                          columnNumber: 66\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 529,\n                        columnNumber: 41\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 528,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 521,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 520,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 519,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"share-credentials\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dispflex\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"share-title\",\n                  children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                    children: \"Recent Requests\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 547,\n                    columnNumber: 62\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 547,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Company\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 552,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 552,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Requested Documents\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 553,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 553,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Requested At\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 554,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 554,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 555,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 551,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 550,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: /*#__PURE__*/_jsxDEV(RenderRequests, {\n                    requests: this.state.requests,\n                    handleRemove: this.handleRemove,\n                    handleClickSend: this.handleClickSend\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 21\n          }, this), this.state.send_status && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dash-main-request-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"requeted-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                onClick: this.handleCloseSend,\n                class: \"open-close-button open\",\n                style: {\n                  marginTop: '10px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 569,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"requested-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Company: \", this.state.sending_details.company]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 571,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Requested For: \", this.state.sending_details.docs]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 572,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Requested At: \", /*#__PURE__*/_jsxDEV(TimeAgo, {\n                    date: this.state.sending_details.req_at\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 573,\n                    columnNumber: 46\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 573,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Select Your Document to Send:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"dash-request-select\",\n                  onChange: this.handleChangeSend,\n                  name: \"\",\n                  id: \"\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: 0,\n                    children: \"select\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 576,\n                    columnNumber: 29\n                  }, this), this.renderOptions()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 575,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"dash-request-btn \".concat(!this.state.sending_btn && 'form-btn-disabled'),\n                  onClick: this.handleDocSend,\n                  children: \"Send Document\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 579,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 570,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 17\n      }, this);\n    }\n  }]);\n\n  return Dashboard;\n}(Component);\n\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"RenderRequests\");","map":{"version":3,"sources":["C:/Users/dd/Desktop/Project SSI/Major Project/client/src/components/Dashboard.js"],"names":["React","Component","uuid","TimeAgo","IPFS","SSI","VerifierSSI","getWeb3","nacl","require","util","arrayBufferToHex","RenderRequests","props","requests","map","req","i","removed","company","docs","req_at","float","review","status","handleClickSend","handleRemove","Dashboard","state","user","demo","imageState","image","did","title","web3","accounts","SSI_contract","VerifierSSI_contract","uploadDoc","request_index","sending_details","sending_document","send_status","sendingDocId","ipfsHash","ipfsMessage","refresh","loading","sending_btn","doc","console","log","methods","removeRequest","request_id","send","from","window","location","href","handleForm","e","preventDefault","docArray","JSON","parse","localStorage","getItem","v1","replace","getDocCount","call","docId","doc_id","user_did","name","address","email","phone","issuer_did","signature","created_at","Date","verified_at","node","once","add","Buffer","stringify","err","files","error","hash","setState","addDocument","setItem","handleTitle","target","value","handleFormPopUp","handleFile","reader","FileReader","onload","result","readAsDataURL","handleCloseSend","handleChangeSend","handleLogout","document","cookie","handleDocSend","setTimeout","storage","storage_details","ipfsObj","req_id","u_did","doc_did","V_publicKey","user_privateKey","privateKey","verifier_publicKey","nonce","randomBytes","msg","box","decodeUTF8","message","boxHex","nonceHex","messageHex","user_publicKey","publicKey","acceptedByUser","componentDidMount","cookieArr","split","forEach","arr","content","ran","eth","getAccounts","net","getId","networkId","deployedNetwork_SSI","networks","instance_SSI","Contract","abi","deployedNetwork_VerifierSSI","instance_VerifierSSI","showRequest","reqIndex","show","request_details","rem","push","Math","floor","id","getIndividualRequest","comp_and_doc","removeItem","showAllDocs","docsIndex","allDocs","getDocument","cat","ipfs","data","alert","renderOptions","Object","entries","pair","renderDocuments","maxWidth","textTransform","marginRight","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport uuid from 'uuid'\n// import { Redirect } from 'react-router-dom'\nimport TimeAgo from 'react-timeago'\nimport IPFS from 'ipfs'\n// import {Cookies} from 'react-cookie';\nimport './dashboard.css';\nimport SSI from \"../contracts/SSI.json\";\nimport VerifierSSI from \"../contracts/VerifierSSI.json\";\nimport getWeb3 from \"../utils/getWeb3\";\n\nconst nacl = require(\"tweetnacl\");\nnacl.util = require(\"tweetnacl-util\");\nconst arrayBufferToHex = require(\"array-buffer-to-hex\");\n\nconst RenderRequests = (props) => {\n    return (\n            props.requests.map((req,i) => (\n                <tr key={i}>\n                    <td className={req.removed ? 'verifier-strike-removed' : ''} ><h6>{req.company}</h6></td>\n                    <td className={req.removed ? 'verifier-strike-removed' : ''} ><h6>{req.docs}</h6></td>\n                    <td className={req.removed ? 'verifier-strike-removed' : ''} ><h6><TimeAgo date={req.req_at}/></h6></td>\n                    <td style={{float:'right'}}>\n                        {\n                            (!req.review) ? \n                                (!req.review && req.status) ? \n                                    <button className=\"btn btn-info\">Pending</button> : \n                                    (!req.removed && <button onClick={() => props.handleClickSend(req, i)} className=\"btn btn-info\">send document</button>)\n                            :\n                            (req.review && req.status) ? \n                                <button className=\"btn btn-success\">document accepted</button>\n                                : <button  className=\"btn btn-danger \">document rejected</button>\n                        }\n                        {req.removed ? <div className=\"dash-remove-btn\">REMOVED</div>\n                        :\n                        <div onClick={() => props.handleRemove(req)} className=\"dash-remove-btn\">REMOVE</div>\n                        }\n                        \n                    </td>\n                </tr>\n            ))\n    )\n}\n\nclass Dashboard extends Component {\n    state = {\n        user: {},\n        demo: null,\n        imageState:null,\n        image:null,\n        did:null,\n        title:null,\n        web3:null,\n        accounts:null,\n        SSI_contract:null,\n        VerifierSSI_contract:null,\n        uploadDoc:true,\n        request_index:null,\n        requests:[],\n        sending_details: null,\n        sending_document:null,\n        send_status:false,\n        sendingDocId:null,\n        ipfsHash:null,\n        ipfsMessage: null,\n        refresh:false,\n        docs: [],\n        loading:true,\n        sending_btn:false,\n    }\n\n    handleRemove = async (doc) => {\n        console.log('test')\n        console.log(doc)\n        const { accounts, VerifierSSI_contract } = this.state;\n        await VerifierSSI_contract.methods.removeRequest(doc.request_id).send({ from: accounts[0] });\n\n\n// re render the requests\n    window.location.href = 'http://localhost:3000/dashboard';\n    }\n    // add new document \n    handleForm = async(e) => {\n        e.preventDefault();\n        const { accounts, SSI_contract } = this.state;\n        console.log('clicked');\n        let docArray = JSON.parse(localStorage.getItem('documents'));\n        if(docArray === null) {\n            docArray = {}\n        }\n        // every document has unique did\n        let did = uuid.v1().replace(/-/g, \"\");\n        \n        const docId = await SSI_contract.methods.getDocCount().call();\n        // store the document locally\n        docArray[this.state.title] = {\n            doc_id: docId,\n            user_did: this.state.user.did,\n            did: did,\n            title:this.state.title,\n            image:this.state.image,\n            name:this.state.user.name,\n            address:this.state.user.address,\n            email:this.state.user.email,\n            phone:this.state.user.phone,\n            review:false,\n            status:0,\n            issuer_did:null,\n            signature:null,\n            created_at:new Date(),\n            verified_at:null,\n        }\n        // create an IPFS\n        const node = new IPFS();\n        node.once(\"ready\", () => {\n          // convert  data to a Buffer and add it to IPFS\n          node.add(\n            IPFS.Buffer.from(JSON.stringify(docArray[this.state.title])),\n            async (err, files) => {\n              if (err) return console.error(err);\n\n              // 'hash', known as CID, is a string uniquely addressing the data\n              // and can be used to get it again. 'files' is an array because\n              // 'add' supports multiple additions, but we only added one entry\n              console.log(files[0].hash);\n              this.setState({ ipfsHash: files[0].hash });\n\n\n              // write document did to the blockchain\n              await SSI_contract.methods\n                .addDocument(this.state.user.did, did, files[0].hash)\n                .send({ from: accounts[0] });\n            }\n          );\n        });\n        \n        localStorage.setItem('documents', JSON.stringify(docArray));\n        console.log(docArray)\n        console.log('test')\n        this.setState({ uploadDoc: true })\n        \n    }\n    handleTitle = (e) => {\n        this.setState({title:e.target.value});\n    }\n    handleFormPopUp = () => {\n        this.setState({ uploadDoc: false })\n    }\n    handleFile = (e) => {\n        let reader = new FileReader();\n        console.log(e.target.files);\n        reader.onload = () => {\n            this.setState({\n                imageState: true,\n                image: reader.result\n            });\n        }\n        reader.readAsDataURL(e.target.files[0])\n    }\n    handleClickSend = (req,i) => {\n        this.setState({ sending_details:req,send_status:true})\n    }\n    handleCloseSend = () => {\n        this.setState({ send_status: false })\n    }\n    handleChangeSend = (e) => {\n        if(e.target.value == 0){\n            this.setState({sending_btn:false})\n        } else{\n            this.setState({sending_btn:true, sending_document: e.target.value })\n        }\n    }\n    handleLogout = () => {\n        document.cookie = `did = ; expires= ${new Date()}`;\n        window.location.href = \"http://localhost:3000/\";\n\n    }\n    handleDocSend = async() => {\n        // handleDocSend will send the document to the vierifier\n        // current component is for calling this.setstate inside the callback function\n\n        //  we need to improve this section since we are duplicating the document on the ipfs\n        // for different verifier since the document is same but the ipfs address is different\n        // or we can leave as it is because if the same address is send then the address may be leak..\n        \n        // enable sending doc btn\n        setTimeout(() => {\n            this.setState({ sending_btn: true, send_status: false })\n        }, 2000);\n        const { accounts, VerifierSSI_contract } = this.state;\n        let storage = JSON.parse(localStorage.getItem('documents'));\n        let sending_document = this.state.sending_document;\n        let sending_details = this.state.sending_details;\n        let storage_details = storage[sending_document];\n        // console.log(sending_details)\n        // console.log(storage_details)\n        const node = new IPFS()\n        // let ipfsObj = storage[sending_document];\n        let ipfsObj = {};\n        ipfsObj.req_id = sending_details.request_id;\n        ipfsObj.user_did = sending_details.u_did;\n        ipfsObj.doc_did = storage_details.did;\n        ipfsObj.title = storage_details.title;\n        ipfsObj.image = storage_details.image;\n        ipfsObj.name = storage_details.name;\n        ipfsObj.email = storage_details.email;\n        ipfsObj.phone = storage_details.phone;\n        ipfsObj.review = storage_details.review;\n        ipfsObj.status = storage_details.status;\n        ipfsObj.issuer_did = storage_details.issuer_did;\n        ipfsObj.signature = storage_details.signature;\n        ipfsObj.created_at = storage_details.created_at;\n        ipfsObj.verified_at = storage_details.verified_at;\n        // once the node is ready\n        console.log(ipfsObj)\n        node.once('ready', () => {\n            // convert  data to a Buffer and add it to IPFS\n            node.add(IPFS.Buffer.from(JSON.stringify(ipfsObj)), async(err, files) => {\n                if (err) return console.error(err)\n\n                // 'hash', known as CID, is a string uniquely addressing the data\n                // and can be used to get it again. 'files' is an array because\n                // 'add' supports multiple additions, but we only added one entry\n                console.log(files[0].hash)\n                console.log(this.state.sending_details.V_publicKey)\n                this.setState({ ipfsHash: files[0].hash })\n                // encrypt the ipfs address using public key of verifier\n                // Encrypting the message for Verifier.\n                // verifier public key\n\n                // user is sending the message to the verifier \n                // reading Bob key pair from secret key\n                const user_privateKey = Buffer.from(this.state.user.privateKey, \"hex\");\n                // const user_publicKey = Buffer.from(this.state.user.publicKey, \"hex\");\n                const verifier_publicKey = Buffer.from(sending_details.V_publicKey, \"hex\");\n                // generating one time nonce for encryption\n                const nonce = nacl.randomBytes(24)\n                // message for Alice\n                let msg = files[0].hash;\n                // Bob encrypts message for Alice\n                const box = nacl.box(\n                  nacl.util.decodeUTF8(msg),\n                  nonce,\n                  verifier_publicKey,\n                  user_privateKey\n                );\n                // somehow send this message to Alice\n                const message = { box, nonce } \n                console.log(message)\n                let boxHex = arrayBufferToHex(message.box);\n                let nonceHex = arrayBufferToHex(message.nonce);\n                let messageHex = {boxHex,nonceHex,user_publicKey:this.state.user.publicKey};\n                this.setState({ipfsMessage:messageHex});\n                console.log(messageHex)\n                \n\n\n\n                await VerifierSSI_contract.methods\n                  .acceptedByUser(\n                    this.state.sending_details.request_id,\n                    JSON.stringify(messageHex)\n                  )\n                  .send({ from: accounts[0] });\n                // window.location.reload(false);\n            })\n        });\n\n\n    } \n    componentDidMount = async () => {\n        let cookie = document.cookie;\n        let cookieArr = cookie.split('; ');\n        let value = [];\n        cookieArr.forEach(arr => {\n            let content = arr.split('=');\n            value[content[0]] = content[1];\n            \n        });\n\n        this.setState({\n            user: {\n                name: value[\"name\"],\n                email: value[\"email\"],\n                phone: value[\"phone\"],\n                address: value[\"address\"],\n                did: value[\"did\"],\n                privateKey: value[\"privateKey\"],\n                publicKey: value[\"publicKey\"],\n            }\n        });\n        if(value['name']){\n            let ran = value['name'].split(' ');\n            this.setState({demo:ran[0]});\n        }\n\n        try {\n            // Get network provider and web3 instance.\n            const web3 = await getWeb3();\n            // Use web3 to get the user's accounts.\n            const accounts = await web3.eth.getAccounts();\n\n            // Get the contract instance.\n            const networkId = await web3.eth.net.getId();\n            const deployedNetwork_SSI = SSI.networks[networkId];\n            const instance_SSI = new web3.eth.Contract(\n                SSI.abi,\n                deployedNetwork_SSI && deployedNetwork_SSI.address,\n                );\n            const deployedNetwork_VerifierSSI = VerifierSSI.networks[networkId];\n            const instance_VerifierSSI = new web3.eth.Contract(\n                VerifierSSI.abi,\n                deployedNetwork_VerifierSSI && deployedNetwork_VerifierSSI.address,\n            );\n\n            // Set web3, accounts, and contract to the state, and then proceed with an\n            // example of interacting with the contract's methods.\n            this.setState({ web3, accounts, SSI_contract: instance_SSI,VerifierSSI_contract:instance_VerifierSSI });\n            \n            // latest Requests\n            const VerifierSSI_contract = this.state.VerifierSSI_contract;\n            // await VerifierSSI_contract.methods.evaluateRequest(this.state.user.did).send({ from: accounts[0] });\n            let reqIndex = await VerifierSSI_contract.methods.showRequest(this.state.user.did).call();\n            console.log(reqIndex)\n            // if number is greater than 101020304050607080 (after this 09....) then it is \n            // converted to javascript and we could not handle this and gets error (by receiving the other document either not exist or of theres)\n            let show = [];\n            let request_details = [];\n            if (reqIndex > 1) {\n                // we have found documents\n                while (reqIndex >= 100) {\n                    let rem = reqIndex % 100;\n                    show.push(rem);\n                    reqIndex = Math.floor(reqIndex / 100);\n                }\n            }\n            if (show){\n                show.forEach( async id => {\n                    // console.log(await VerifierSSI_contract.methods.getIndividualRequest(id).call());\n                    request_details[0] = (await VerifierSSI_contract.methods.getIndividualRequest(id).call());\n                    request_details[0].request_id = id;\n                    let comp_and_doc = request_details[0].comp_and_doc;\n                    request_details[0].docs = comp_and_doc.split(';')[0];\n                    request_details[0].company = comp_and_doc.split(';')[1];\n                    this.setState({requests:[...this.state.requests,request_details[0]]})\n                });\n                // console.log(request_details['request'])\n            }\n\n            // reading all the users documents from blockchian\n            localStorage.removeItem('documents');\n            let docArray = {}\n            const SSI_contract = this.state.SSI_contract;\n            // await SSI_contract.methods.evaluateRequest(this.state.user.did).send({ from: accounts[0] });\n            let docsIndex = await SSI_contract.methods.showAllDocs(this.state.user.did).call();\n            let allDocs = [];\n            let docs = [];\n            if (docsIndex > 1){\n                // we have found documents\n                while(docsIndex >= 100) {\n                    let rem = docsIndex % 100;\n                    allDocs.push(rem);\n                    docsIndex = Math.floor(docsIndex / 100);\n                }\n            }\n            if(allDocs) {\n                const node = new IPFS()\n                node.once('ready', () => {\n                    allDocs.forEach( async id => {\n                        docs[0] = (await SSI_contract.methods.getDocument(id).call());\n\n                        // read the ipfs\n                        node.cat(docs[0].ipfs, (err, data) => {\n                            if (err) return console.error(err);\n                            // convert Buffer back to string\n                            // let storage = {};\n                            // // console.log(JSON.parse(data));\n                            // storage = JSON.parse(localStorage.getItem(\"documents\"));\n                            // if (!storage) {\n                            //     storage = {};\n                            // }\n                            docArray[JSON.parse(data).title] = JSON.parse(data);\n\n                            // console.log(JSON.parse(localStorage.getItem('ipfsDetails')))\n                        });\n                        docs[0].doc_id = id;\n                        this.setState({ docs: [...this.state.docs, docs[0]] })\n                    })\n                });\n                setTimeout(() => {\n                    localStorage.setItem(\"documents\", JSON.stringify(docArray));\n                    this.setState({ loading: false })\n                }, 1000);\n            }\n        } catch (error) {\n            // Catch any errors for any of the above operations.\n            alert(\n                `Failed to load web3, accounts, or contract. Check console for details.`,\n            );\n            console.error(error);\n        }\n    }\n\n    renderOptions = () => {\n        let storage = JSON.parse(localStorage.getItem('documents'));\n        if (storage && this.state.uploadDoc) {\n            return Object.entries(storage).map((pair, i) => {\n                return (\n                    <option key={i} value={pair[0]}>\n                        {pair[0]}\n                    </option>\n                )\n            })\n        }\n\n\n    }\n    renderDocuments = () => {\n        let storage = JSON.parse(localStorage.getItem('documents'));\n        if(storage && this.state.uploadDoc){\n            return Object.entries(storage).map((pair,i) => {\n                return (\n                    <tr key={i}>\n                        <td><h5>{pair[0]}</h5></td>\n                        <td />\n                        <td>\n                            <button className={pair[1].status ? 'btn btn-success float-right' : 'btn btn-danger float-right'} >{} {(!pair[1].review) ? 'UNVERIFIED' : (pair[1].review && pair[1].status) ? 'Verified' : 'Rejected'}</button>\n                            <button className=\"btn btn-secondary float-right mr-2\" data-toggle=\"modal\" data-target={\"#exampleModal\" + i}>PREVIEW</button>\n                        <div className=\"modal fade\" id={\"exampleModal\"+i} tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                            <div className=\"modal-dialog\" role=\"document\" style={{ maxWidth: '700px' }}>\n                                <div className=\"modal-content\">\n                                    <div className=\"modal-header\">\n                                        <h5 className=\"modal-title\" id=\"exampleModalLabel\">{pair[1].title}</h5>\n                                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                            <span aria-hidden=\"true\">×</span>\n                                        </button>\n                                    </div>\n                                    <div className=\"modal-body\">\n                                        <img className=\"img-responsive\" height=\"600px\" width=\"400px\" src={pair[1].image} alt=\"\"/>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        </td>\n                    </tr>\n                )\n            })\n        }\n\n    }\n    render() {\n        let cookie = document.cookie;\n        let cookieArr = cookie.split('; ');\n        let value = [];\n        cookieArr.forEach(arr => {\n            let content = arr.split('=');\n            value[content[0]] = content[1];\n        });\n        if (!value['did']) {\n            window.location.href = \"http://localhost:3000/\";\n        }\n        return (\n                <div>\n                <div className=\"dash-container\">\n                <div className=\"dash-nav\">\n                    <div>\n                        <h1 className=\"dash-title\">Self Sovereign Identity</h1>\n                    </div>\n                    <div>\n                        <button onClick={this.handleLogout} className=\"dash-logout-btn\">Logout</button>\n                    </div>\n                </div>\n                    <div className=\"dash-profile-container\">\n                        <div className=\"profile-img\"><div className=\"the-image\" /></div>\n                        <div className=\"\">\n                            <table className=\"table\">\n                                <tbody className=\"demo-user\">\n                                    <tr>\n                                        <td><h5>Name:</h5></td>\n                                        <td><p>{this.state.user.name}</p></td>\n                                    </tr>\n                                    <tr>\n                                        <td><h5>Address:</h5></td>\n                                        <td><h6>{this.state.user.address}</h6></td>\n                                    </tr>\n                                    <tr>\n                                        <td><h5>Email:</h5></td>\n                                        <td><h6 style={{textTransform:'lowercase'}}>{this.state.user.email}</h6></td>\n                                    </tr>\n                                    <tr>\n                                        <td><h5>Phone:</h5></td>\n                                        <td><h6>{this.state.user.phone}</h6></td>\n                                    </tr>\n                                    <tr>\n                                        <td><h5>DID:</h5></td>\n                                        <td><h6>{this.state.user.did}</h6></td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                    {!this.state.send_status && \n                    <div className=\"dash-content-container\">\n                    <div className=\"content-table\">\n                        <table className=\"table\">\n                            <thead>\n                                <tr>\n                                    <th><h1>Documents</h1></th>\n                                    <th />\n                                        <th><button className=\"dash-add-doc-btn float-right\" data-toggle=\"modal\" data-target=\"#exampleModal\" onClick={this.handleFormPopUp}><i className=\"fa fa-plus\" style={{ marginRight: '5px' }} />Add New</button></th>\n                                </tr>\n                            </thead>\n                            <tbody>\n\n                                {!this.state.loading &&  this.renderDocuments() }\n                                                        \n                            </tbody>\n                        </table>\n                        <div className=\"modal fade\" id=\"exampleModal\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                            <div className=\"modal-dialog\" role=\"document\">\n                                <div className=\"modal-content\">\n                                    <div className=\"modal-header\">\n                                        <h5 className=\"modal-title\" id=\"exampleModalLabel\">Add New Document</h5>\n                                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                            <span aria-hidden=\"true\">×</span>\n                                        </button>\n                                    </div>\n                                    <div className=\"modal-body\">\n                                        <form onSubmit={this.handleForm} encType=\"multipart/form-data\">\n                                        <label htmlFor=\"title\">Document Title</label>\n                                        <input type=\"text\" name=\"title\" onChange={this.handleTitle} className=\"form-control\"/>\n                                            <label htmlFor=\"document\">Select Document File</label>\n                                            <input type=\"file\" name=\"file\" onChange={this.handleFile} className=\"form-control\"/>\n                                        <div className=\"modal-footer\">\n                                                <button type=\"submit\" onClick={this.handleForm} className=\"btn btn-primary\" data-dismiss=\"modal\">Add Document</button>\n                                        </div>\n                                            {this.state.image && <img src={this.state.image} alt=\"\"/> }\n                                    </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                        <div className=\"share-credentials\">\n                            <div className=\"dispflex\">\n                                <div className=\"share-title\"><h1>Recent Requests</h1></div>\n                            </div>\n                            <table className=\"table\">\n                                <thead>\n                                    <tr>\n                                        <th><h5>Company</h5></th>\n                                        <th><h5>Requested Documents</h5></th>\n                                        <th><h5>Requested At</h5></th>\n                                        <th />\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    <RenderRequests requests={this.state.requests} handleRemove={this.handleRemove} handleClickSend = {this.handleClickSend} />\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                    }\n                    {\n                        this.state.send_status && \n                        <div className=\"dash-main-request-container\">\n                            <div className=\"requeted-container\">\n                            <div onClick={this.handleCloseSend} class=\"open-close-button open\" style={{marginTop:'10px'}}></div>\n                            <div className=\"requested-content\">\n                            <p>Company: {this.state.sending_details.company}</p>\n                            <p>Requested For: {this.state.sending_details.docs}</p>\n                            <p>Requested At: <TimeAgo date={this.state.sending_details.req_at} /></p>\n                            <p>Select Your Document to Send:</p>\n                            <select className=\"dash-request-select\" onChange={this.handleChangeSend} name=\"\" id=\"\">\n                            <option value={0}>select</option>\n                                {this.renderOptions()}\n                            </select>\n                                <button className={`dash-request-btn ${!this.state.sending_btn && 'form-btn-disabled'}`} onClick={this.handleDocSend}>Send Document</button>\n                            </div>\n                        </div>\n                        </div>\n                    }\n                    </div>\n                </div>\n\n        )\n    }\n}\n\nexport default Dashboard;\n\n"]},"metadata":{},"sourceType":"module"}