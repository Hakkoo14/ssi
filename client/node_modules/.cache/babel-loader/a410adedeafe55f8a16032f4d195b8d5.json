{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\gkhakurel\\\\Downloads\\\\Poject-main\\\\Poject-main\\\\client\\\\src\\\\components\\\\Issuer.js\";\nimport React, { Component } from 'react';\nimport './issuer.css';\nimport IPFS from 'ipfs';\nimport SSI from \"../contracts/SSI.json\";\nimport getWeb3 from \"../utils/getWeb3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar Issuer = /*#__PURE__*/function (_Component) {\n  _inherits(Issuer, _Component);\n\n  var _super = _createSuper(Issuer);\n\n  function Issuer() {\n    var _this;\n\n    _classCallCheck(this, Issuer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      web3: null,\n      accounts: null,\n      contract: null,\n      refresh: false,\n      documents: [],\n      totalDocument: 0,\n      loading: true\n    };\n    _this.componentDidMount = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var web3, accounts, networkId, deployedNetwork, instance, SSI_contract, totalDocument;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return getWeb3();\n\n            case 3:\n              web3 = _context.sent;\n              _context.next = 6;\n              return web3.eth.getAccounts();\n\n            case 6:\n              accounts = _context.sent;\n              _context.next = 9;\n              return web3.eth.net.getId();\n\n            case 9:\n              networkId = _context.sent;\n              deployedNetwork = SSI.networks[networkId];\n              instance = new web3.eth.Contract(SSI.abi, deployedNetwork && deployedNetwork.address); // Set web3, accounts, and contract to the state, and then proceed with an\n              // example of interacting with the contract's methods.\n\n              _this.setState({\n                web3: web3,\n                accounts: accounts,\n                contract: instance\n              });\n\n              SSI_contract = _this.state.contract;\n              _context.next = 16;\n              return SSI_contract.methods.totalDocuments().call();\n\n            case 16:\n              totalDocument = _context.sent;\n              console.log(totalDocument);\n\n              _this.setState({\n                totalDocument: totalDocument\n              });\n\n              _this.loadDocument();\n\n              setTimeout(function () {\n                _this.setState({\n                  loading: false\n                });\n              }, 1000);\n              _context.next = 27;\n              break;\n\n            case 23:\n              _context.prev = 23;\n              _context.t0 = _context[\"catch\"](0);\n              // Catch any errors for any of the above operations.\n              alert(\"Failed to load web3, accounts, or contract. Check console for details.\");\n              console.error(_context.t0);\n\n            case 27:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 23]]);\n    }));\n\n    _this.handleApprove = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(pair, i) {\n        var _this$state, accounts, contract, node, docDetails;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                console.log(i);\n                _this$state = _this.state, accounts = _this$state.accounts, contract = _this$state.contract;\n                console.log('pair');\n                console.log(pair);\n                pair.review = true;\n                pair.status = 1; // create an IPFS\n\n                node = new IPFS();\n                node.once(\"ready\", function () {\n                  // convert  data to a Buffer and add it to IPFS\n                  node.add(IPFS.Buffer.from(JSON.stringify(pair)), /*#__PURE__*/function () {\n                    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(err, files) {\n                      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                        while (1) {\n                          switch (_context2.prev = _context2.next) {\n                            case 0:\n                              if (!err) {\n                                _context2.next = 2;\n                                break;\n                              }\n\n                              return _context2.abrupt(\"return\", console.error(err));\n\n                            case 2:\n                              _context2.next = 4;\n                              return contract.methods.verifyDocument(pair.doc_id, pair.user_did, pair.did, files[0].hash, 'adsfasdfdsf').send({\n                                from: accounts[0]\n                              });\n\n                            case 4:\n                            case \"end\":\n                              return _context2.stop();\n                          }\n                        }\n                      }, _callee2);\n                    }));\n\n                    return function (_x3, _x4) {\n                      return _ref3.apply(this, arguments);\n                    };\n                  }());\n                });\n                _context3.next = 10;\n                return contract.methods.getDocument(pair.doc_id).call();\n\n              case 10:\n                docDetails = _context3.sent;\n                console.log(docDetails);\n\n                _this.setState({\n                  refresh: true\n                });\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x, _x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleReject = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(pair, i) {\n        var _this$state2, accounts, contract, node, docDetails;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                console.log(i);\n                _this$state2 = _this.state, accounts = _this$state2.accounts, contract = _this$state2.contract;\n                pair.review = true;\n                pair.status = 0; // create an IPFS\n\n                node = new IPFS();\n                node.once(\"ready\", function () {\n                  // convert  data to a Buffer and add it to IPFS\n                  node.add(IPFS.Buffer.from(JSON.stringify(pair)), /*#__PURE__*/function () {\n                    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(err, files) {\n                      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                        while (1) {\n                          switch (_context4.prev = _context4.next) {\n                            case 0:\n                              if (!err) {\n                                _context4.next = 2;\n                                break;\n                              }\n\n                              return _context4.abrupt(\"return\", console.error(err));\n\n                            case 2:\n                              _context4.next = 4;\n                              return contract.methods.verifyDocument(pair.doc_id, pair.user_did, pair.did, files[0].hash, 'adsfasdfdsf').send({\n                                from: accounts[0]\n                              });\n\n                            case 4:\n                            case \"end\":\n                              return _context4.stop();\n                          }\n                        }\n                      }, _callee4);\n                    }));\n\n                    return function (_x7, _x8) {\n                      return _ref5.apply(this, arguments);\n                    };\n                  }());\n                });\n                _context5.next = 8;\n                return contract.methods.getDocument(pair.doc_id).call();\n\n              case 8:\n                docDetails = _context5.sent;\n                console.log(docDetails);\n\n                _this.setState({\n                  refresh: true\n                });\n\n              case 11:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function (_x5, _x6) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    _this.loadDocument = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var SSI_contract, doc, _loop, index;\n\n      return _regeneratorRuntime.wrap(function _callee6$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              SSI_contract = _this.state.contract;\n              doc = [];\n              _loop = /*#__PURE__*/_regeneratorRuntime.mark(function _loop(index) {\n                var d, node;\n                return _regeneratorRuntime.wrap(function _loop$(_context6) {\n                  while (1) {\n                    switch (_context6.prev = _context6.next) {\n                      case 0:\n                        _context6.next = 2;\n                        return SSI_contract.methods.getDocument(index).call();\n\n                      case 2:\n                        d = _context6.sent;\n                        console.log(d);\n\n                        if (d.ipfs) {\n                          node = new IPFS();\n                          node.once('ready', function () {\n                            node.cat(d.ipfs, function (err, data) {\n                              if (err) return console.error(err); // convert Buffer back to string\n                              // console.log(JSON.parse(data));\n\n                              doc.push(JSON.parse(data));\n                            });\n                          });\n                        }\n\n                      case 5:\n                      case \"end\":\n                        return _context6.stop();\n                    }\n                  }\n                }, _loop);\n              });\n              index = 0;\n\n            case 4:\n              if (!(index < _this.state.totalDocument)) {\n                _context7.next = 9;\n                break;\n              }\n\n              return _context7.delegateYield(_loop(index), \"t0\", 6);\n\n            case 6:\n              index++;\n              _context7.next = 4;\n              break;\n\n            case 9:\n              _this.setState({\n                documents: doc,\n                refresh: true\n              });\n\n            case 10:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    _this.renderDocuments = function () {\n      // read all the documents from the blockchain\n      if (_this.state.documents.length) {\n        return _this.state.documents.map(function (pair, i) {\n          console.log('testsetes');\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: pair.user_did\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 29\n              }, _assertThisInitialized(_this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 25\n            }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: pair.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 29\n              }, _assertThisInitialized(_this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 25\n            }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: pair.created_at\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 29\n              }, _assertThisInitialized(_this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 25\n            }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [!pair.review && /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: function onClick() {\n                    return _this.handleReject(pair, i);\n                  },\n                  className: \"btn btn-danger float-right ml-2\",\n                  children: \"reject\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 33\n                }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: function onClick() {\n                    return _this.handleApprove(pair, i);\n                  },\n                  className: \"btn btn-success float-right ml-2\",\n                  children: \"approve\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 33\n                }, _assertThisInitialized(_this)), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 47\n              }, _assertThisInitialized(_this)), pair.review && /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [pair.review && pair.status ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-success float-right ml-2\",\n                  children: \"approved\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 65\n                }, _assertThisInitialized(_this)) : /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger float-right ml-2\",\n                  children: \"rejected\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 35\n                }, _assertThisInitialized(_this)), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 45\n              }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"issuer-search-btn float-right\",\n                style: {\n                  paddingLeft: '30px',\n                  paddingRight: '30px',\n                  paddingtop: '13px'\n                },\n                \"data-toggle\": \"modal\",\n                \"data-target\": \"#exampleModal\" + i,\n                children: \"preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 29\n              }, _assertThisInitialized(_this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 25\n            }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal fade\",\n              id: \"exampleModal\" + i,\n              tabIndex: -1,\n              role: \"dialog\",\n              \"aria-labelledby\": \"exampleModalLabel\",\n              \"aria-hidden\": \"true\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"modal-dialog\",\n                role: \"document\",\n                style: {\n                  maxWidth: '800px'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"modal-content\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"modal-header\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                      className: \"modal-title\",\n                      id: \"exampleModalLabel\",\n                      children: pair.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 41\n                    }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"button\",\n                      className: \"close\",\n                      \"data-dismiss\": \"modal\",\n                      \"aria-label\": \"Close\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        \"aria-hidden\": \"true\",\n                        children: \"\\xD7\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 175,\n                        columnNumber: 45\n                      }, _assertThisInitialized(_this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 41\n                    }, _assertThisInitialized(_this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 37\n                  }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"modal-body\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Document No: \", pair.doc_id]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 179,\n                      columnNumber: 41\n                    }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Name: \", pair.name]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 180,\n                      columnNumber: 41\n                    }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Phone: \", pair.phone]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 181,\n                      columnNumber: 41\n                    }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Email: \", pair.email]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 182,\n                      columnNumber: 41\n                    }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Address: \", pair.address]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 183,\n                      columnNumber: 41\n                    }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"DID: \", pair.did]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 41\n                    }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"Status: \", pair.review ? 'Reviewed' : 'Not Reviewed']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 185,\n                      columnNumber: 41\n                    }, _assertThisInitialized(_this)), /*#__PURE__*/_jsxDEV(\"img\", {\n                      className: \"img-responsive\",\n                      height: \"600px\",\n                      width: \"400px\",\n                      src: pair.image,\n                      alt: \"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 41\n                    }, _assertThisInitialized(_this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 37\n                  }, _assertThisInitialized(_this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 33\n                }, _assertThisInitialized(_this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 29\n              }, _assertThisInitialized(_this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 25\n            }, _assertThisInitialized(_this))]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 21\n          }, _assertThisInitialized(_this));\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Issuer, [{\n    key: \"render\",\n    value: function render() {\n      // if (this.state.refresh === true) {\n      //     this.setState({ refresh: false })\n      //     return <Redirect to='/issuer' />\n      // }\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"issuer-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dash-nav\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"dash-title\",\n              children: \"Self Sovereign Identity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"search-issuer\",\n              type: \"text\",\n              placeholder: \"search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: this.handleLogout,\n              className: \"issuer-search-btn\",\n              children: \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"main-header\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"issuer\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"issuer_logo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"issuer_title\",\n                children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                  style: {\n                    fontSize: '3rem'\n                  },\n                  children: \"Issuer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 59\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"requests-list\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                style: {\n                  marginTop: '4vh',\n                  marginBottom: '4vh',\n                  color: '#691008',\n                  fontWeight: 500\n                },\n                children: \"Requests list\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  className: \"issuer-thead\",\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Account\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 228,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 228,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Document\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 229,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 229,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                        children: \"Timestamp\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 230,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 230,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 231,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: !this.state.loading && this.renderDocuments()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }, this);\n    }\n  }]);\n\n  return Issuer;\n}(Component);\n\nexport default Issuer;","map":{"version":3,"sources":["C:/Users/gkhakurel/Downloads/Poject-main/Poject-main/client/src/components/Issuer.js"],"names":["React","Component","IPFS","SSI","getWeb3","Issuer","state","web3","accounts","contract","refresh","documents","totalDocument","loading","componentDidMount","eth","getAccounts","net","getId","networkId","deployedNetwork","networks","instance","Contract","abi","address","setState","SSI_contract","methods","totalDocuments","call","console","log","loadDocument","setTimeout","alert","error","handleApprove","pair","i","review","status","node","once","add","Buffer","from","JSON","stringify","err","files","verifyDocument","doc_id","user_did","did","hash","send","getDocument","docDetails","handleReject","doc","index","d","ipfs","cat","data","push","parse","renderDocuments","length","map","title","created_at","paddingLeft","paddingRight","paddingtop","maxWidth","name","phone","email","image","handleLogout","fontSize","marginTop","marginBottom","color","fontWeight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './issuer.css';\nimport IPFS from 'ipfs'\nimport SSI from \"../contracts/SSI.json\";\nimport getWeb3 from \"../utils/getWeb3\";\n\nclass Issuer extends Component {\n    state = {\n        web3: null,\n        accounts: null,\n        contract: null,\n        refresh:false,\n        documents:[],\n        totalDocument:0,\n        loading:true,\n    }\n \n    componentDidMount = async () => {\n        try {\n            // Get network provider and web3 instance.\n            const web3 = await getWeb3();\n            // Use web3 to get the user's accounts.\n            const accounts = await web3.eth.getAccounts();\n            // console.log(accounts);\n\n            // Get the contract instance.\n            const networkId = await web3.eth.net.getId();\n            const deployedNetwork = SSI.networks[networkId];\n            const instance = new web3.eth.Contract(\n                SSI.abi,\n                deployedNetwork && deployedNetwork.address,\n            );\n\n            // Set web3, accounts, and contract to the state, and then proceed with an\n            // example of interacting with the contract's methods.\n            this.setState({ web3, accounts, contract: instance });\n\n            const SSI_contract = this.state.contract;\n            let totalDocument = await SSI_contract.methods.totalDocuments().call();\n            console.log(totalDocument)\n            this.setState({totalDocument});\n            this.loadDocument();\n            setTimeout(() => {\n                this.setState({loading:false})\n            }, 1000);\n        } catch (error) {\n            // Catch any errors for any of the above operations.\n            alert(\n                `Failed to load web3, accounts, or contract. Check console for details.`,\n            );\n            console.error(error);\n        }\n    }\n    // handleApprove = async(pair,i) => {\n    //     console.log(i)\n    //     const { accounts, contract } = this.state;\n\n    //     let storage = JSON.parse(localStorage.getItem('documents'));\n    //     pair[1].review = true;\n    //     pair[1].status = 1;\n    //     storage[pair[0]] = pair[1];\n    //     localStorage.setItem('documents', JSON.stringify(storage));\n    //     storage = JSON.parse(localStorage.getItem('documents'));\n    //     console.log(storage)\n\n    //     await contract.methods.verifyDocument(pair[1].doc_id, pair[1].user_did, pair[1].did, pair[1].ipfs,'adsfasdfdsf').send({ from: accounts[0] });\n    //     const docDetails = await contract.methods.getDocument(pair[1].doc_id).call();\n    //     console.log(docDetails)\n    //     this.setState({refresh:true})\n\n    // }\n\n    handleApprove = async (pair, i) => {\n        console.log(i)\n        const { accounts, contract } = this.state;\n        console.log('pair')\n        console.log(pair)\n        pair.review = true;\n        pair.status = 1;\n        // create an IPFS\n        const node = new IPFS();\n        node.once(\"ready\", () => {\n            // convert  data to a Buffer and add it to IPFS\n            node.add(\n                IPFS.Buffer.from(JSON.stringify(pair)),\n                async (err, files) => {\n                    if (err) return console.error(err);\n\n                    // write document did to the blockchain\n\n                    await contract.methods.verifyDocument(pair.doc_id, pair.user_did, pair.did, files[0].hash, 'adsfasdfdsf').send({ from: accounts[0] });\n                });\n        });\n        const docDetails = await contract.methods.getDocument(pair.doc_id).call();\n        console.log(docDetails)\n        this.setState({ refresh: true })\n\n    }\n \n    handleReject = async (pair, i) => {\n        console.log(i)\n        const { accounts, contract } = this.state;\n\n        pair.review = true;\n        pair.status = 0;\n        // create an IPFS\n        const node = new IPFS();\n        node.once(\"ready\", () => {\n            // convert  data to a Buffer and add it to IPFS\n            node.add(\n                IPFS.Buffer.from(JSON.stringify(pair)),\n                async (err, files) => {\n                    if (err) return console.error(err);\n\n                    // write document did to the blockchain\n\n                    await contract.methods.verifyDocument(pair.doc_id, pair.user_did, pair.did, files[0].hash, 'adsfasdfdsf').send({ from: accounts[0] });\n                });\n        });\n\n        const docDetails = await contract.methods.getDocument(pair.doc_id).call();\n        console.log(docDetails)\n        this.setState({ refresh: true })\n\n    }\n    loadDocument = async () => {\n        let SSI_contract = this.state.contract;\n        let doc = [];\n        for (let index = 0; index < this.state.totalDocument; index++) {\n            let d = await SSI_contract.methods.getDocument(index).call();\n            console.log(d)\n            if(d.ipfs){\n                const node = new IPFS()\n                node.once('ready', () => {\n                    node.cat(d.ipfs, (err, data) => {\n                        if (err) return console.error(err);\n                        // convert Buffer back to string\n                        // console.log(JSON.parse(data));\n                        doc.push(JSON.parse(data));\n                    });\n                })\n            }\n        }\n        \n        this.setState({documents:doc, refresh:true});\n    }\n    renderDocuments = () => {\n        // read all the documents from the blockchain\n\n        if (this.state.documents.length) {\n            return this.state.documents.map((pair, i) => {\n                console.log('testsetes')\n                return (\n                    <tr key={i}>\n                        <td><h6>{pair.user_did}</h6></td>\n                        <td><h6>{pair.title}</h6></td>\n                        <td><h6>{pair.created_at}</h6></td>\n                        <td>\n                            { !pair.review && <span>\n                                <button onClick={() => this.handleReject(pair, i)} className=\"btn btn-danger float-right ml-2\">reject</button>\n                                <button onClick={() => this.handleApprove(pair,i)} className=\"btn btn-success float-right ml-2\">approve</button> </span>\n                            }\n                            {pair.review && <span>\n                                {(pair.review && pair.status) ? <button className=\"btn btn-success float-right ml-2\">approved</button>\n                                : <button  className=\"btn btn-danger float-right ml-2\">rejected</button>} </span>\n                            }\n                            <button className=\"issuer-search-btn float-right\" style={{paddingLeft:'30px',paddingRight:'30px',paddingtop:'13px'}} data-toggle=\"modal\" data-target={\"#exampleModal\" + i}>preview</button>\n                        </td>\n                        <div className=\"modal fade\" id={\"exampleModal\" + i} tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                            <div className=\"modal-dialog\" role=\"document\" style={{maxWidth:'800px'}}>\n                                <div className=\"modal-content\">\n                                    <div className=\"modal-header\">\n                                        <h5 className=\"modal-title\" id=\"exampleModalLabel\">{pair.title}</h5>\n                                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                            <span aria-hidden=\"true\">×</span>\n                                        </button>\n                                    </div>\n                                    <div className=\"modal-body\">\n                                        <p>Document No: {pair.doc_id}</p>\n                                        <p>Name: {pair.name}</p>\n                                        <p>Phone: {pair.phone}</p>\n                                        <p>Email: {pair.email}</p>\n                                        <p>Address: {pair.address}</p>\n                                        <p>DID: {pair.did}</p>\n                                        <p>Status: {(pair.review) ? 'Reviewed' : 'Not Reviewed'}</p>\n\n                                        <img className=\"img-responsive\" height=\"600px\" width=\"400px\" src={pair.image} alt=\"\" />\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </tr>\n                )\n            })\n        }\n\n    }\n    render() {\n        // if (this.state.refresh === true) {\n        //     this.setState({ refresh: false })\n        //     return <Redirect to='/issuer' />\n        // }\n        return (\n            <div className=\"issuer-container\">\n                <div className=\"dash-nav\">\n                    <div>\n                        <h1 className=\"dash-title\">Self Sovereign Identity</h1>\n                    </div>\n                    <div>\n                        <input className=\"search-issuer\" type=\"text\" placeholder=\"search\" />\n                        <button onClick={this.handleLogout} className=\"issuer-search-btn\">Search</button>\n                    </div>\n                </div>\n                <div>\n                    <div className=\"main-header\">\n                        <div className=\"issuer\">\n                            <div className=\"issuer_logo\" />\n                            <div className=\"issuer_title\"><h1 style={{ fontSize: '3rem' }}>Issuer</h1></div>\n                        </div>\n\n                    </div>\n                    <div className=\"requests-list\">\n                        <div className=\"container\">\n                            <h2 style={{ marginTop: '4vh', marginBottom: '4vh',color:'#691008',fontWeight:500 }}>Requests list</h2>\n                            <table className=\"table\">\n                                <thead className=\"issuer-thead\">\n                                    <tr>\n                                        <th><h5>Account</h5></th>\n                                        <th><h5>Document</h5></th>\n                                        <th><h5>Timestamp</h5></th>\n                                        <th />\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {!this.state.loading && this.renderDocuments()}\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n \n            </div>\n        )\n    }\n}\n\nexport default Issuer;"]},"metadata":{},"sourceType":"module"}